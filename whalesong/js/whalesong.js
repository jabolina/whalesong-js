!function(e){var t={};function __webpack_require__(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,__webpack_require__),n.l=!0,n.exports}__webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.d=function(e,t,r){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.t=function(e,t){if(1&t&&(e=__webpack_require__(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(__webpack_require__.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)__webpack_require__.d(r,n,function(t){return e[t]}.bind(null,n));return r},__webpack_require__.n=function(e){var t=e&&e.__esModule?function getDefault(){return e.default}:function getModuleExports(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=79)}([function(e,t,r){e.exports={default:r(80),__esModule:!0}},function(e,t,r){"use strict";t.__esModule=!0;var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r(41));t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,n.default)(t))&&"function"!=typeof t?e:t}},function(e,t,r){"use strict";t.__esModule=!0;var n=_interopRequireDefault(r(103)),a=_interopRequireDefault(r(107)),o=_interopRequireDefault(r(41));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,o.default)(t)));e.prototype=(0,a.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(n.default?(0,n.default)(e,t):e.__proto__=t)}},function(e,t,r){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,r){e.exports={default:r(101),__esModule:!0}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.CommandManager=t.Iterator=t.MonitorManager=t.Monitor=t.ResultManager=t.COMMAND_SEPARATOR=t.ResultTypes=void 0;var n,a,o=_interopRequireDefault(r(0)),i=_interopRequireDefault(r(1)),u=_interopRequireDefault(r(66)),l=_interopRequireDefault(r(2)),c=_interopRequireDefault(r(4)),s=_interopRequireDefault(r(13)),p=_interopRequireDefault(r(6)),f=_interopRequireDefault(r(7)),d=_interopRequireDefault(r(49)),h=_interopRequireDefault(r(3)),m=_interopRequireDefault(r(8));t.command=command,t.monitor=function monitor(e,t,r){return e.commands=(0,s.default)({},e.commands||{}),e.commands[t]={type:"monitor"},r};var g=r(33);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _applyDecoratedDescriptor(e,t,r,n,a){var o={};return Object.keys(n).forEach(function(e){o[e]=n[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},o),a&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(a):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var v=t.ResultTypes={ERROR:"ERROR",FINAL:"FINAL",PARTIAL:"PARTIAL"},y=t.COMMAND_SEPARATOR="|",_=t.ResultManager=function(){function ResultManager(){(0,h.default)(this,ResultManager),this._results=[]}return(0,m.default)(ResultManager,[{key:"setResult",value:function setResult(e,t,r){var n={exId:e,type:t,params:r||{}};void 0!==window.whalesongPushResult?window.whalesongPushResult(n):this._results.push(n)}},{key:"setFinalResult",value:function setFinalResult(e,t){this.setResult(e,v.FINAL,t)}},{key:"setPartialResult",value:function setPartialResult(e,t){this.setResult(e,v.PARTIAL,t)}},{key:"setErrorResult",value:function setErrorResult(e,t){this.setResult(e,v.ERROR,t)}},{key:"getResults",value:function getResults(){var e=this._results;return this._results=[],e}}]),ResultManager}(),M=t.Monitor=function(){function Monitor(e,t,r){var n=this;(0,h.default)(this,Monitor),this.obj=e,this.evt=t,this.mapFn=r,this.promise=new d.default(function(e){return n._resolveFunc=e})}return(0,m.default)(Monitor,[{key:"mapEventResult",value:function mapEventResult(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.mapFn?this.mapFn.apply(this,t):{args:t}}},{key:"handler",value:function handler(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var a=this.mapEventResult.apply(this,r);a&&e(a)}},{key:"initMonitor",value:function initMonitor(e){}},{key:"finishMonitor",value:function finishMonitor(e){}},{key:"_addHandler",value:function _addHandler(e){this.obj.on(this.evt,e,this)}},{key:"_removeHandler",value:function _removeHandler(e){this.obj.off(this.evt,e,this)}},{key:"monitor",value:function(){var e=(0,f.default)(p.default.mark(function _callee(e){var t;return p.default.wrap(function _callee$(r){for(;;)switch(r.prev=r.next){case 0:return t=this.handler.bind(this,e),this.initMonitor(e),this._addHandler(t),r.next=5,this.promise;case 5:throw this._removeHandler(t),this.finishMonitor(e),new g.StopMonitor;case 8:case"end":return r.stop()}},_callee,this)}));return function monitor(t){return e.apply(this,arguments)}}()},{key:"stopMonitor",value:function stopMonitor(){this._resolveFunc()}}]),Monitor}(),b=t.MonitorManager=function(){function MonitorManager(){(0,h.default)(this,MonitorManager),this.monitors={}}return(0,m.default)(MonitorManager,[{key:"addMonitor",value:function addMonitor(e,t){this.monitors[e]=t}},{key:"removeMonitor",value:function removeMonitor(e){return e in this.monitors&&(this.monitors[e].stopMonitor(),delete this.monitors[e],!0)}}]),MonitorManager}(),k=t.Iterator=function(){function Iterator(e){(0,h.default)(this,Iterator),this.fn=e}return(0,m.default)(Iterator,[{key:"iter",value:function(){var e=(0,f.default)(p.default.mark(function _callee2(e){return p.default.wrap(function _callee2$(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.default.resolve(this.fn(function(t){return e({item:t})}));case 2:throw new g.StopIterator;case 3:case"end":return t.stop()}},_callee2,this)}));return function iter(t){return e.apply(this,arguments)}}()}]),Iterator}();function command(e,t,r){return e.commands=(0,s.default)({},e.commands||{}),e.commands[t]={type:"command"},r}var w=t.CommandManager=(_applyDecoratedDescriptor((n=function(){function CommandManager(){(0,h.default)(this,CommandManager),this.commands=this.commands||{},this.submanagers={}}return(0,m.default)(CommandManager,[{key:"addSubmanager",value:function addSubmanager(e,t){this.submanagers[e]=t}},{key:"getSubmanager",value:function getSubmanager(e){var t=this.submanagers[e];if(!t)throw new g.ManagerNotFound(e);return t}},{key:"getSubmanagers",value:function(){var e=(0,f.default)(p.default.mark(function _callee3(){var e,t;return p.default.wrap(function _callee3$(r){for(;;)switch(r.prev=r.next){case 0:for(t in e={},this.submanagers)e[t]={class:this.submanagers[t].constructor.name};return r.abrupt("return",e);case 3:case"end":return r.stop()}},_callee3,this)}));return function getSubmanagers(){return e.apply(this,arguments)}}()},{key:"removeSubmanager",value:function(){var e=(0,f.default)(p.default.mark(function _callee4(e){return p.default.wrap(function _callee4$(t){for(;;)switch(t.prev=t.next){case 0:delete this.submanagers[e];case 1:case"end":return t.stop()}},_callee4,this)}));return function removeSubmanager(t){return e.apply(this,arguments)}}()},{key:"executeCommand",value:function(){var e=(0,f.default)(p.default.mark(function _callee5(e,t){var r,n,a;return p.default.wrap(function _callee5$(o){for(;;)switch(o.prev=o.next){case 0:if(!(e.indexOf(y)>=0)){o.next=7;break}return r=e.split(y),n=r.shift(),a=r.join(y),n=this.getSubmanager(n),o.next=6,n.executeCommand(a,t);case 6:return o.abrupt("return",o.sent);case 7:if(e in this.commands){o.next=9;break}throw new g.CommandNotFound(e);case 9:return o.next=11,this[e](t);case 11:return o.abrupt("return",o.sent);case 12:case"end":return o.stop()}},_callee5,this)}));return function executeCommand(t,r){return e.apply(this,arguments)}}()},{key:"getCommands",value:function(){var e=(0,f.default)(p.default.mark(function _callee6(){var e,t,r,n;return p.default.wrap(function _callee6$(a){for(;;)switch(a.prev=a.next){case 0:e=(0,s.default)({},this.commands),a.t0=p.default.keys(this.submanagers);case 2:if((a.t1=a.t0()).done){a.next=10;break}return t=a.t1.value,a.next=6,this.submanagers[t].getCommands();case 6:for(n in r=a.sent)e[t+y+n]=r[n];a.next=2;break;case 10:return a.abrupt("return",e);case 11:case"end":return a.stop()}},_callee6,this)}));return function getCommands(){return e.apply(this,arguments)}}()}]),CommandManager}()).prototype,"getSubmanagers",[command],(0,c.default)(n.prototype,"getSubmanagers"),n.prototype),_applyDecoratedDescriptor(n.prototype,"removeSubmanager",[command],(0,c.default)(n.prototype,"removeSubmanager"),n.prototype),_applyDecoratedDescriptor(n.prototype,"getCommands",[command],(0,c.default)(n.prototype,"getCommands"),n.prototype),n),D=(_applyDecoratedDescriptor((a=function(e){function MainManager(){(0,h.default)(this,MainManager);var e=(0,i.default)(this,(MainManager.__proto__||(0,o.default)(MainManager)).call(this));return e.resultManager=new _,e.monitorManager=new b(e.resultManager),e}return(0,l.default)(MainManager,e),(0,m.default)(MainManager,[{key:"poll",value:function poll(e){var t=[];if(e)for(var r in e){var n=e[r];if(n.exId)if(n.command)try{this.executeCommand(n.exId,n.command,n.params||{})}catch(e){throw console.error(e,n),e}else t.push({name:"RequiredCommandName",message:"Command name is required",executionsObj:n});else t.push({name:"RequiredExecutionId",message:"Execuction ID is required",executionsObj:n})}return{results:this.resultManager.getResults(),errors:t}}},{key:"executeCommand",value:function(){var e=(0,f.default)(p.default.mark(function _callee7(e,t,r){var n,a=this;return p.default.wrap(function _callee7$(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,console.log(e,t,r),i.next=4,(0,u.default)(MainManager.prototype.__proto__||(0,o.default)(MainManager.prototype),"executeCommand",this).call(this,t,r);case 4:if(!((n=i.sent)instanceof M)){i.next=11;break}return this.monitorManager.addMonitor(e,n),i.next=9,n.monitor(function(t){return a.resultManager.setPartialResult(e,t)});case 9:i.next=14;break;case 11:if(!(n instanceof k)){i.next=14;break}return i.next=14,n.iter(function(t){return a.resultManager.setPartialResult(e,t)});case 14:console.log(e,t,n),this.resultManager.setFinalResult(e,n),i.next=22;break;case 18:i.prev=18,i.t0=i.catch(0),console.error(i.t0,t,r),i.t0 instanceof Error||i.t0 instanceof g.BaseError?this.resultManager.setErrorResult(e,{name:i.t0.displayName||i.t0.name,message:i.t0.message,params:i.t0.params||{}}):this.resultManager.setErrorResult(e,{err:i.t0});case 22:case"end":return i.stop()}},_callee7,this,[[0,18]])}));return function executeCommand(t,r,n){return e.apply(this,arguments)}}()},{key:"stopMonitor",value:function(){var e=(0,f.default)(p.default.mark(function _callee8(e){var t=e.monitorId;return p.default.wrap(function _callee8$(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.monitorManager.removeMonitor(t));case 1:case"end":return e.stop()}},_callee8,this)}));return function stopMonitor(t){return e.apply(this,arguments)}}()},{key:"ping",value:function(){var e=(0,f.default)(p.default.mark(function _callee9(){return p.default.wrap(function _callee9$(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return","pong");case 1:case"end":return e.stop()}},_callee9,this)}));return function ping(){return e.apply(this,arguments)}}()}]),MainManager}(w)).prototype,"stopMonitor",[command],(0,c.default)(a.prototype,"stopMonitor"),a.prototype),_applyDecoratedDescriptor(a.prototype,"ping",[command],(0,c.default)(a.prototype,"ping"),a.prototype),a);t.default=D},function(e,t,r){e.exports=r(113)},function(e,t,r){"use strict";t.__esModule=!0;var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r(49));t.default=function(e){return function(){var t=e.apply(this,arguments);return new n.default(function(e,r){return function step(a,o){try{var i=t[a](o),u=i.value}catch(e){return void r(e)}if(!i.done)return n.default.resolve(u).then(function(e){step("next",e)},function(e){step("throw",e)});e(u)}("next")})}}},function(e,t,r){"use strict";t.__esModule=!0;var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r(130));t.default=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),(0,n.default)(e,a.key,a)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}()},function(e,t){var r=e.exports={version:"2.6.2"};"number"==typeof __e&&(__e=r)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CollectionManager=t.ModelManager=t.CollectionItemFieldMonitor=t.CollectionItemMonitor=t.FieldMonitor=t.BaseFieldMonitor=void 0;var n,a,o=_interopRequireDefault(r(66)),i=_interopRequireDefault(r(4)),u=_interopRequireDefault(r(6)),l=_interopRequireDefault(r(7)),c=_interopRequireDefault(r(0)),s=_interopRequireDefault(r(3)),p=_interopRequireDefault(r(8)),f=_interopRequireDefault(r(1)),d=_interopRequireDefault(r(2)),h=r(5),m=r(51);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _applyDecoratedDescriptor(e,t,r,n,a){var o={};return Object.keys(n).forEach(function(e){o[e]=n[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},o),a&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(a):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var g=t.BaseFieldMonitor=function(e){function BaseFieldMonitor(e,t,r){(0,s.default)(this,BaseFieldMonitor);var n=(0,f.default)(this,(BaseFieldMonitor.__proto__||(0,c.default)(BaseFieldMonitor)).call(this,e,"change:"+t,r));return n.field=t,n}return(0,d.default)(BaseFieldMonitor,e),(0,p.default)(BaseFieldMonitor,[{key:"mapEventResult",value:function mapEventResult(){return this.mapFn?this.mapFn.apply(this,arguments):{value:arguments.length<=1?void 0:arguments[1]}}}]),BaseFieldMonitor}(h.Monitor),v=t.FieldMonitor=function(e){function FieldMonitor(){return(0,s.default)(this,FieldMonitor),(0,f.default)(this,(FieldMonitor.__proto__||(0,c.default)(FieldMonitor)).apply(this,arguments))}return(0,d.default)(FieldMonitor,e),(0,p.default)(FieldMonitor,[{key:"initMonitor",value:function initMonitor(e){this.handler(e,this.obj,this.obj[this.field])}}]),FieldMonitor}(g),y=t.CollectionItemMonitor=function(e){function CollectionItemMonitor(){return(0,s.default)(this,CollectionItemMonitor),(0,f.default)(this,(CollectionItemMonitor.__proto__||(0,c.default)(CollectionItemMonitor)).apply(this,arguments))}return(0,d.default)(CollectionItemMonitor,e),(0,p.default)(CollectionItemMonitor,[{key:"mapEventResult",value:function mapEventResult(){var e=this.mapFn(arguments.length<=0?void 0:arguments[0]);return e?{item:e}:null}}]),CollectionItemMonitor}(h.Monitor),_=t.CollectionItemFieldMonitor=function(e){function CollectionItemFieldMonitor(){return(0,s.default)(this,CollectionItemFieldMonitor),(0,f.default)(this,(CollectionItemFieldMonitor.__proto__||(0,c.default)(CollectionItemFieldMonitor)).apply(this,arguments))}return(0,d.default)(CollectionItemFieldMonitor,e),(0,p.default)(CollectionItemFieldMonitor,[{key:"mapEventResult",value:function mapEventResult(){return{value:arguments.length<=1?void 0:arguments[1],itemId:this.mapFn(arguments.length<=0?void 0:arguments[0]).id}}}]),CollectionItemFieldMonitor}(g),M=t.ModelManager=(_applyDecoratedDescriptor((n=function(e){function ModelManager(e){(0,s.default)(this,ModelManager);var t=(0,f.default)(this,(ModelManager.__proto__||(0,c.default)(ModelManager)).call(this));return t.model=e,t}return(0,d.default)(ModelManager,e),(0,p.default)(ModelManager,[{key:"getModel",value:function(){var e=(0,l.default)(u.default.mark(function _callee(){return u.default.wrap(function _callee$(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.constructor.mapModel(this.model));case 1:case"end":return e.stop()}},_callee,this)}));return function getModel(){return e.apply(this,arguments)}}()},{key:"monitorModel",value:function(){var e=(0,l.default)(u.default.mark(function _callee2(){var e=this;return u.default.wrap(function _callee2$(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new y(this.model,"change",function(t){return e.constructor.mapModel(t)}));case 1:case"end":return t.stop()}},_callee2,this)}));return function monitorModel(){return e.apply(this,arguments)}}()},{key:"monitorField",value:function(){var e=(0,l.default)(u.default.mark(function _callee3(e){var t=e.field;return u.default.wrap(function _callee3$(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new v(this.model,t));case 1:case"end":return e.stop()}},_callee3,this)}));return function monitorField(t){return e.apply(this,arguments)}}()}],[{key:"mapModel",value:function mapModel(e){return e.toJSON()}}]),ModelManager}(h.CommandManager)).prototype,"getModel",[h.command],(0,i.default)(n.prototype,"getModel"),n.prototype),_applyDecoratedDescriptor(n.prototype,"monitorModel",[h.monitor],(0,i.default)(n.prototype,"monitorModel"),n.prototype),_applyDecoratedDescriptor(n.prototype,"monitorField",[h.monitor],(0,i.default)(n.prototype,"monitorField"),n.prototype),n);t.CollectionManager=(_applyDecoratedDescriptor((a=function(e){function CollectionManager(e){(0,s.default)(this,CollectionManager);var t=(0,f.default)(this,(CollectionManager.__proto__||(0,c.default)(CollectionManager)).call(this));return t.collection=e,t}return(0,d.default)(CollectionManager,e),(0,p.default)(CollectionManager,null,[{key:"getModelManagerClass",value:function getModelManagerClass(){return M}}]),(0,p.default)(CollectionManager,[{key:"mapItem",value:function mapItem(e){return this.constructor.getModelManagerClass().mapModel(e)}},{key:"loadItem",value:function loadItem(e){var t=this.collection.get(e);if(!t)throw new m.ModelNotFound('Item with ID "'+e+'" not found');return t}},{key:"findItem",value:function(){var e=(0,l.default)(u.default.mark(function _callee4(e){var t;return u.default.wrap(function _callee4$(r){for(;;)switch(r.prev=r.next){case 0:if(t=this.collection.find(e)){r.next=3;break}throw new m.ModelNotFound('Item with ID "'+e+'" not found');case 3:return r.abrupt("return",t);case 4:case"end":return r.stop()}},_callee4,this)}));return function findItem(t){return e.apply(this,arguments)}}()},{key:"getSubmanager",value:function getSubmanager(e){try{return(0,o.default)(CollectionManager.prototype.__proto__||(0,c.default)(CollectionManager.prototype),"getSubmanager",this).call(this,e)}catch(t){try{return new(this.constructor.getModelManagerClass())(this.loadItem(e))}catch(e){throw t}}}},{key:"getItems",value:function(){var e=(0,l.default)(u.default.mark(function _callee5(){var e=this;return u.default.wrap(function _callee5$(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new h.Iterator(function(t){return e.collection.forEach(function(r){return t(e.mapItem(r))})}));case 1:case"end":return t.stop()}},_callee5,this)}));return function getItems(){return e.apply(this,arguments)}}()},{key:"getLength",value:function(){var e=(0,l.default)(u.default.mark(function _callee6(){return u.default.wrap(function _callee6$(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.collection.length);case 1:case"end":return e.stop()}},_callee6,this)}));return function getLength(){return e.apply(this,arguments)}}()},{key:"getItemById",value:function(){var e=(0,l.default)(u.default.mark(function _callee7(e){var t=e.id;return u.default.wrap(function _callee7$(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.mapItem(this.loadItem(t)));case 1:case"end":return e.stop()}},_callee7,this)}));return function getItemById(t){return e.apply(this,arguments)}}()},{key:"findItemById",value:function(){var e=(0,l.default)(u.default.mark(function _callee8(e){var t=e.id;return u.default.wrap(function _callee8$(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,this.findItem(t);case 3:return e.t1=e.sent,e.abrupt("return",e.t0.mapItem.call(e.t0,e.t1));case 5:case"end":return e.stop()}},_callee8,this)}));return function findItemById(t){return e.apply(this,arguments)}}()},{key:"removeItemById",value:function(){var e=(0,l.default)(u.default.mark(function _callee9(e){var t=e.id;return u.default.wrap(function _callee9$(e){for(;;)switch(e.prev=e.next){case 0:this.collection.remove(this.loadItem(t));case 1:case"end":return e.stop()}},_callee9,this)}));return function removeItemById(t){return e.apply(this,arguments)}}()},{key:"getFirst",value:function(){var e=(0,l.default)(u.default.mark(function _callee10(){return u.default.wrap(function _callee10$(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.mapItem(this.collection.models[0]));case 1:case"end":return e.stop()}},_callee10,this)}));return function getFirst(){return e.apply(this,arguments)}}()},{key:"getLast",value:function(){var e=(0,l.default)(u.default.mark(function _callee11(){return u.default.wrap(function _callee11$(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.mapItem(this.collection.last()));case 1:case"end":return e.stop()}},_callee11,this)}));return function getLast(){return e.apply(this,arguments)}}()},{key:"monitorAdd",value:function(){var e=(0,l.default)(u.default.mark(function _callee12(){var e=this;return u.default.wrap(function _callee12$(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new y(this.collection,"add",function(t){return e.mapItem(t)}));case 1:case"end":return t.stop()}},_callee12,this)}));return function monitorAdd(){return e.apply(this,arguments)}}()},{key:"monitorRemove",value:function(){var e=(0,l.default)(u.default.mark(function _callee13(){var e=this;return u.default.wrap(function _callee13$(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new y(this.collection,"remove",function(t){return e.mapItem(t)}));case 1:case"end":return t.stop()}},_callee13,this)}));return function monitorRemove(){return e.apply(this,arguments)}}()},{key:"monitorChange",value:function(){var e=(0,l.default)(u.default.mark(function _callee14(){var e=this;return u.default.wrap(function _callee14$(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new y(this.collection,"change",function(t){return e.mapItem(t)}));case 1:case"end":return t.stop()}},_callee14,this)}));return function monitorChange(){return e.apply(this,arguments)}}()},{key:"monitorField",value:function(){var e=(0,l.default)(u.default.mark(function _callee15(e){var t=this,r=e.field;return u.default.wrap(function _callee15$(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new _(this.collection,r,function(e){return t.mapItem(e)}));case 1:case"end":return e.stop()}},_callee15,this)}));return function monitorField(t){return e.apply(this,arguments)}}()}]),CollectionManager}(h.CommandManager)).prototype,"getItems",[h.command],(0,i.default)(a.prototype,"getItems"),a.prototype),_applyDecoratedDescriptor(a.prototype,"getLength",[h.command],(0,i.default)(a.prototype,"getLength"),a.prototype),_applyDecoratedDescriptor(a.prototype,"getItemById",[h.command],(0,i.default)(a.prototype,"getItemById"),a.prototype),_applyDecoratedDescriptor(a.prototype,"findItemById",[h.command],(0,i.default)(a.prototype,"findItemById"),a.prototype),_applyDecoratedDescriptor(a.prototype,"removeItemById",[h.command],(0,i.default)(a.prototype,"removeItemById"),a.prototype),_applyDecoratedDescriptor(a.prototype,"getFirst",[h.command],(0,i.default)(a.prototype,"getFirst"),a.prototype),_applyDecoratedDescriptor(a.prototype,"getLast",[h.command],(0,i.default)(a.prototype,"getLast"),a.prototype),_applyDecoratedDescriptor(a.prototype,"monitorAdd",[h.monitor],(0,i.default)(a.prototype,"monitorAdd"),a.prototype),_applyDecoratedDescriptor(a.prototype,"monitorRemove",[h.monitor],(0,i.default)(a.prototype,"monitorRemove"),a.prototype),_applyDecoratedDescriptor(a.prototype,"monitorChange",[h.monitor],(0,i.default)(a.prototype,"monitorChange"),a.prototype),_applyDecoratedDescriptor(a.prototype,"monitorField",[h.monitor],(0,i.default)(a.prototype,"monitorField"),a.prototype),a)},function(e,t){var r=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(e,t,r){var n=r(38)("wks"),a=r(29),o=r(11).Symbol,i="function"==typeof o;(e.exports=function(e){return n[e]||(n[e]=i&&o[e]||(i?o:a)("Symbol."+e))}).store=n},function(e,t,r){e.exports={default:r(110),__esModule:!0}},function(e,t,r){var n=r(11),a=r(9),o=r(24),i=r(21),u=r(20),l=function(e,t,r){var c,s,p,f=e&l.F,d=e&l.G,h=e&l.S,m=e&l.P,g=e&l.B,v=e&l.W,y=d?a:a[t]||(a[t]={}),_=y.prototype,M=d?n:h?n[t]:(n[t]||{}).prototype;for(c in d&&(r=t),r)(s=!f&&M&&void 0!==M[c])&&u(y,c)||(p=s?M[c]:r[c],y[c]=d&&"function"!=typeof M[c]?r[c]:g&&s?o(p,n):v&&M[c]==p?function(e){var t=function(t,r,n){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,r)}return new e(t,r,n)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(p):m&&"function"==typeof p?o(Function.call,p):p,m&&((y.virtual||(y.virtual={}))[c]=p,e&l.R&&_&&!_[c]&&i(_,c,p)))};l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,e.exports=l},function(e,t,r){var n=r(17);e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},function(e,t,r){var n=r(15),a=r(55),o=r(40),i=Object.defineProperty;t.f=r(18)?Object.defineProperty:function defineProperty(e,t,r){if(n(e),t=o(t,!0),n(r),a)try{return i(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,r){e.exports=!r(22)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t,r){var n=r(60),a=r(36);e.exports=function(e){return n(a(e))}},function(e,t){var r={}.hasOwnProperty;e.exports=function(e,t){return r.call(e,t)}},function(e,t,r){var n=r(16),a=r(31);e.exports=r(18)?function(e,t,r){return n.f(e,t,a(1,r))}:function(e,t,r){return e[t]=r,e}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){e.exports=!0},function(e,t,r){var n=r(30);e.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,a){return e.call(t,r,n,a)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports={}},function(e,t,r){var n=r(59),a=r(44);e.exports=Object.keys||function keys(e){return n(e,a)}},function(e,t){var r={}.toString;e.exports=function(e){return r.call(e).slice(8,-1)}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t){var r=0,n=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++r+n).toString(36))}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,r){var n=r(16).f,a=r(20),o=r(12)("toStringTag");e.exports=function(e,t,r){e&&!a(e=r?e:e.prototype,o)&&n(e,o,{configurable:!0,value:t})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OperationNotAllowed=t.StopMonitor=t.StopIterator=t.ValueError=t.CommandNotFound=t.ManagerNotFound=t.BaseError=void 0;var n=_interopRequireDefault(r(0)),a=_interopRequireDefault(r(1)),o=_interopRequireDefault(r(2)),i=_interopRequireDefault(r(3));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var u=t.BaseError=function BaseError(e){(0,i.default)(this,BaseError),this.message=e,this.name=this.constructor.name,this.params=arguments[1]||{}};t.ManagerNotFound=function(e){function ManagerNotFound(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#unknown#";return(0,i.default)(this,ManagerNotFound),(0,a.default)(this,(ManagerNotFound.__proto__||(0,n.default)(ManagerNotFound)).call(this,"Manager "+e+" not found"))}return(0,o.default)(ManagerNotFound,e),ManagerNotFound}(u),t.CommandNotFound=function(e){function CommandNotFound(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#unknown#";return(0,i.default)(this,CommandNotFound),(0,a.default)(this,(CommandNotFound.__proto__||(0,n.default)(CommandNotFound)).call(this,"Command "+e+" not found"))}return(0,o.default)(CommandNotFound,e),CommandNotFound}(u),t.ValueError=function(e){function ValueError(){return(0,i.default)(this,ValueError),(0,a.default)(this,(ValueError.__proto__||(0,n.default)(ValueError)).apply(this,arguments))}return(0,o.default)(ValueError,e),ValueError}(u),t.StopIterator=function(e){function StopIterator(){return(0,i.default)(this,StopIterator),(0,a.default)(this,(StopIterator.__proto__||(0,n.default)(StopIterator)).apply(this,arguments))}return(0,o.default)(StopIterator,e),StopIterator}(u),t.StopMonitor=function(e){function StopMonitor(){return(0,i.default)(this,StopMonitor),(0,a.default)(this,(StopMonitor.__proto__||(0,n.default)(StopMonitor)).apply(this,arguments))}return(0,o.default)(StopMonitor,e),StopMonitor}(u),t.OperationNotAllowed=function(e){function OperationNotAllowed(){return(0,i.default)(this,OperationNotAllowed),(0,a.default)(this,(OperationNotAllowed.__proto__||(0,n.default)(OperationNotAllowed)).apply(this,arguments))}return(0,o.default)(OperationNotAllowed,e),OperationNotAllowed}(u)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContactCollectionManager=t.ContactManager=void 0;var n,a,o=_interopRequireDefault(r(4)),i=_interopRequireDefault(r(6)),u=_interopRequireDefault(r(7)),l=_interopRequireDefault(r(0)),c=_interopRequireDefault(r(13)),s=_interopRequireDefault(r(3)),p=_interopRequireDefault(r(1)),f=_interopRequireDefault(r(8)),d=_interopRequireDefault(r(2)),h=r(5),m=r(10),g=r(73),v=r(74);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _applyDecoratedDescriptor(e,t,r,n,a){var o={};return Object.keys(n).forEach(function(e){o[e]=n[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},o),a&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(a):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var y=t.ContactManager=(_applyDecoratedDescriptor((n=function(e){function ContactManager(e){(0,s.default)(this,ContactManager);var t=(0,p.default)(this,(ContactManager.__proto__||(0,l.default)(ContactManager)).call(this,e));return e.profilePicThumb&&t.addSubmanager("profilePicThumb",manager.getSubmanager("profilePicThumbs").getSubmanager(t.model.id._serialized)),t}return(0,d.default)(ContactManager,e),(0,f.default)(ContactManager,null,[{key:"mapModel",value:function mapModel(e){return(0,c.default)(m.ModelManager.mapModel(e),{id:e.id._serialized,formattedName:e.formattedName,isHighLevelVerified:e.isHighLevelVerified,isMe:e.isMe,isMyContact:e.isMyContact,isPSA:e.isPSA,isUser:e.isUser,isVerified:e.isVerified,isWAContact:e.isWAContact,profilePicThumbObj:e.profilePicThumb?g.ProfilePicThumbManager.mapModel(e.profilePicThumb):null,statusMute:e.statusMute,userhash:e.userhash,userid:e.userid,status:e.status?v.StatusManager.mapModel(e.status):null})}}]),(0,f.default)(ContactManager,[{key:"block",value:function(){var e=(0,u.default)(i.default.mark(function _callee(){return i.default.wrap(function _callee$(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.model.setBlock(!0));case 1:case"end":return e.stop()}},_callee,this)}));return function block(){return e.apply(this,arguments)}}()},{key:"unblock",value:function(){var e=(0,u.default)(i.default.mark(function _callee2(){return i.default.wrap(function _callee2$(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.model.setBlock(!1));case 1:case"end":return e.stop()}},_callee2,this)}));return function unblock(){return e.apply(this,arguments)}}()}]),ContactManager}(m.ModelManager)).prototype,"block",[h.command],(0,o.default)(n.prototype,"block"),n.prototype),_applyDecoratedDescriptor(n.prototype,"unblock",[h.command],(0,o.default)(n.prototype,"unblock"),n.prototype),n);t.ContactCollectionManager=(_applyDecoratedDescriptor((a=function(e){function ContactCollectionManager(){return(0,s.default)(this,ContactCollectionManager),(0,p.default)(this,(ContactCollectionManager.__proto__||(0,l.default)(ContactCollectionManager)).apply(this,arguments))}return(0,d.default)(ContactCollectionManager,e),(0,f.default)(ContactCollectionManager,[{key:"resyncContacts",value:function(){var e=(0,u.default)(i.default.mark(function _callee3(){return i.default.wrap(function _callee3$(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.collection.resyncContacts());case 1:case"end":return e.stop()}},_callee3,this)}));return function resyncContacts(){return e.apply(this,arguments)}}()},{key:"getMe",value:function(){var e=(0,u.default)(i.default.mark(function _callee4(){return i.default.wrap(function _callee4$(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,this.collection.find(manager.getSubmanager("conn").me);case 3:return e.t1=e.sent,e.abrupt("return",e.t0.mapItem.call(e.t0,e.t1));case 5:case"end":return e.stop()}},_callee4,this)}));return function getMe(){return e.apply(this,arguments)}}()}],[{key:"getModelManagerClass",value:function getModelManagerClass(){return y}}]),ContactCollectionManager}(m.CollectionManager)).prototype,"resyncContacts",[h.command],(0,o.default)(a.prototype,"resyncContacts"),a.prototype),_applyDecoratedDescriptor(a.prototype,"getMe",[h.command],(0,o.default)(a.prototype,"getMe"),a.prototype),a)},function(e,t,r){var n=r(36);e.exports=function(e){return Object(n(e))}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,r){var n=r(38)("keys"),a=r(29);e.exports=function(e){return n[e]||(n[e]=a(e))}},function(e,t,r){var n=r(9),a=r(11),o=a["__core-js_shared__"]||(a["__core-js_shared__"]={});(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:n.version,mode:r(23)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(e,t,r){var n=r(17),a=r(11).document,o=n(a)&&n(a.createElement);e.exports=function(e){return o?a.createElement(e):{}}},function(e,t,r){var n=r(17);e.exports=function(e,t){if(!n(e))return e;var r,a;if(t&&"function"==typeof(r=e.toString)&&!n(a=r.call(e)))return a;if("function"==typeof(r=e.valueOf)&&!n(a=r.call(e)))return a;if(!t&&"function"==typeof(r=e.toString)&&!n(a=r.call(e)))return a;throw TypeError("Can't convert object to primitive value")}},function(e,t,r){"use strict";t.__esModule=!0;var n=_interopRequireDefault(r(82)),a=_interopRequireDefault(r(92)),o="function"==typeof a.default&&"symbol"==typeof n.default?function(e){return typeof e}:function(e){return e&&"function"==typeof a.default&&e.constructor===a.default&&e!==a.default.prototype?"symbol":typeof e};function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}t.default="function"==typeof a.default&&"symbol"===o(n.default)?function(e){return void 0===e?"undefined":o(e)}:function(e){return e&&"function"==typeof a.default&&e.constructor===a.default&&e!==a.default.prototype?"symbol":void 0===e?"undefined":o(e)}},function(e,t){var r=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:r)(e)}},function(e,t,r){var n=r(15),a=r(86),o=r(44),i=r(37)("IE_PROTO"),u=function(){},l=function(){var e,t=r(39)("iframe"),n=o.length;for(t.style.display="none",r(62).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),l=e.F;n--;)delete l.prototype[o[n]];return l()};e.exports=Object.create||function create(e,t){var r;return null!==e?(u.prototype=n(e),r=new u,u.prototype=null,r[i]=e):r=l(),void 0===t?r:a(r,t)}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,r){t.f=r(12)},function(e,t,r){var n=r(11),a=r(9),o=r(23),i=r(45),u=r(16).f;e.exports=function(e){var t=a.Symbol||(a.Symbol=o?{}:n.Symbol||{});"_"==e.charAt(0)||e in t||u(t,e,{value:i.f(e)})}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,r){var n=r(28),a=r(31),o=r(19),i=r(40),u=r(20),l=r(55),c=Object.getOwnPropertyDescriptor;t.f=r(18)?c:function getOwnPropertyDescriptor(e,t){if(e=o(e),t=i(t,!0),l)try{return c(e,t)}catch(e){}if(u(e,t))return a(!n.f.call(e,t),e[t])}},function(e,t,r){e.exports={default:r(115),__esModule:!0}},function(e,t,r){"use strict";var n=r(30);function PromiseCapability(e){var t,r;this.promise=new e(function(e,n){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=n}),this.resolve=n(t),this.reject=n(r)}e.exports.f=function(e){return new PromiseCapability(e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SendMessageFail=t.ModelNotFound=void 0;var n=_interopRequireDefault(r(0)),a=_interopRequireDefault(r(3)),o=_interopRequireDefault(r(1)),i=_interopRequireDefault(r(2)),u=r(33);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}t.ModelNotFound=function(e){function ModelNotFound(){return(0,a.default)(this,ModelNotFound),(0,o.default)(this,(ModelNotFound.__proto__||(0,n.default)(ModelNotFound)).apply(this,arguments))}return(0,i.default)(ModelNotFound,e),ModelNotFound}(u.BaseError),t.SendMessageFail=function(e){function SendMessageFail(){return(0,a.default)(this,SendMessageFail),(0,o.default)(this,(SendMessageFail.__proto__||(0,n.default)(SendMessageFail)).apply(this,arguments))}return(0,i.default)(SendMessageFail,e),SendMessageFail}(u.BaseError)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MessageCollectionManager=t.MessageManager=void 0;var n,a,o=_interopRequireDefault(r(4)),i=_interopRequireDefault(r(13)),u=_interopRequireDefault(r(6)),l=_interopRequireDefault(r(7)),c=_interopRequireDefault(r(0)),s=_interopRequireDefault(r(3)),p=_interopRequireDefault(r(8)),f=_interopRequireDefault(r(1)),d=_interopRequireDefault(r(2)),h=r(10),m=r(5),g=r(34),v=r(72);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _applyDecoratedDescriptor(e,t,r,n,a){var o={};return Object.keys(n).forEach(function(e){o[e]=n[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},o),a&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(a):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var y=t.MessageManager=(_applyDecoratedDescriptor((n=function(e){function MessageManager(){return(0,s.default)(this,MessageManager),(0,f.default)(this,(MessageManager.__proto__||(0,c.default)(MessageManager)).apply(this,arguments))}return(0,d.default)(MessageManager,e),(0,p.default)(MessageManager,[{key:"fetchInfo",value:function(){var e=(0,l.default)(u.default.mark(function _callee(){var e;return u.default.wrap(function _callee$(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,manager.getSubmanager("messageInfos").fetchByMessage(this.model);case 2:return e=t.sent,this.addSubmanager("msgInfo",manager.getSubmanager("messageInfos").getSubmanager(this.model.id._serialized)),t.abrupt("return",e);case 5:case"end":return t.stop()}},_callee,this)}));return function fetchInfo(){return e.apply(this,arguments)}}()},{key:"canStar",value:function(){var e=(0,l.default)(u.default.mark(function _callee2(){return u.default.wrap(function _callee2$(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.model.canStar());case 1:case"end":return e.stop()}},_callee2,this)}));return function canStar(){return e.apply(this,arguments)}}()},{key:"star",value:function(){var e=(0,l.default)(u.default.mark(function _callee3(){return u.default.wrap(function _callee3$(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,manager.getSubmanager("chats").getSubmanager(this.model.chat.id).sendStarMsgs({messageIds:[this.model.id]});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},_callee3,this)}));return function star(){return e.apply(this,arguments)}}()},{key:"unstar",value:function(){var e=(0,l.default)(u.default.mark(function _callee4(){return u.default.wrap(function _callee4$(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,manager.getSubmanager("chats").getSubmanager(this.model.chat.id).sendUnstarMsgs({messageIds:[this.model.id]});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},_callee4,this)}));return function unstar(){return e.apply(this,arguments)}}()},{key:"canRevoke",value:function(){var e=(0,l.default)(u.default.mark(function _callee5(){return u.default.wrap(function _callee5$(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.model.canRevoke());case 1:case"end":return e.stop()}},_callee5,this)}));return function canRevoke(){return e.apply(this,arguments)}}()},{key:"revoke",value:function(){var e=(0,l.default)(u.default.mark(function _callee6(e){var t=e.clearMedia;return u.default.wrap(function _callee6$(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.model.sendRevoke(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},_callee6,this)}));return function revoke(t){return e.apply(this,arguments)}}()}],[{key:"mapModel",value:function mapModel(e){return(0,i.default)(h.ModelManager.mapModel(e),{id:e.id._serialized,senderObj:e.senderObj?g.ContactManager.mapModel(e.senderObj):null,chat:e.chat?v.ChatManager.mapModel(e.chat):null,isGroupMsg:e.isGroupMsg,isLink:e.isLink,isMMS:e.isMMS,isMedia:e.isMedia,isNotification:e.isNotification,isPSA:e.isPSA,hasPromises:!!e.promises.length,streamingSidecar:null})}}]),MessageManager}(h.ModelManager)).prototype,"fetchInfo",[m.command],(0,o.default)(n.prototype,"fetchInfo"),n.prototype),_applyDecoratedDescriptor(n.prototype,"canStar",[m.command],(0,o.default)(n.prototype,"canStar"),n.prototype),_applyDecoratedDescriptor(n.prototype,"star",[m.command],(0,o.default)(n.prototype,"star"),n.prototype),_applyDecoratedDescriptor(n.prototype,"unstar",[m.command],(0,o.default)(n.prototype,"unstar"),n.prototype),_applyDecoratedDescriptor(n.prototype,"canRevoke",[m.command],(0,o.default)(n.prototype,"canRevoke"),n.prototype),_applyDecoratedDescriptor(n.prototype,"revoke",[m.command],(0,o.default)(n.prototype,"revoke"),n.prototype),n);t.MessageCollectionManager=(_applyDecoratedDescriptor((a=function(e){function MessageCollectionManager(){return(0,s.default)(this,MessageCollectionManager),(0,f.default)(this,(MessageCollectionManager.__proto__||(0,c.default)(MessageCollectionManager)).apply(this,arguments))}return(0,d.default)(MessageCollectionManager,e),(0,p.default)(MessageCollectionManager,[{key:"monitorNew",value:function(){var e=(0,l.default)(u.default.mark(function _callee7(){var e=this;return u.default.wrap(function _callee7$(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new h.CollectionItemMonitor(this.collection,"add",function(t){return t.isNewMsg&&!t.isSentByMeFromWeb?e.mapItem(t):null}));case 1:case"end":return t.stop()}},_callee7,this)}));return function monitorNew(){return e.apply(this,arguments)}}()}],[{key:"getModelManagerClass",value:function getModelManagerClass(){return y}}]),MessageCollectionManager}(h.CollectionManager)).prototype,"monitorNew",[m.monitor],(0,o.default)(a.prototype,"monitorNew"),a.prototype),a)},function(e,t,r){var n=r(20),a=r(35),o=r(37)("IE_PROTO"),i=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=a(e),n(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?i:null}},function(e,t,r){var n=r(14),a=r(9),o=r(22);e.exports=function(e,t){var r=(a.Object||{})[e]||Object[e],i={};i[e]=t(r),n(n.S+n.F*o(function(){r(1)}),"Object",i)}},function(e,t,r){e.exports=!r(18)&&!r(22)(function(){return 7!=Object.defineProperty(r(39)("div"),"a",{get:function(){return 7}}).a})},function(e,t,r){"use strict";var n=r(84)(!0);r(57)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=n(t,r),this._i+=e.length,{value:e,done:!1})})},function(e,t,r){"use strict";var n=r(23),a=r(14),o=r(58),i=r(21),u=r(25),l=r(85),c=r(32),s=r(53),p=r(12)("iterator"),f=!([].keys&&"next"in[].keys()),d=function(){return this};e.exports=function(e,t,r,h,m,g,v){l(r,t,h);var y,_,M,b=function(e){if(!f&&e in C)return C[e];switch(e){case"keys":return function keys(){return new r(this,e)};case"values":return function values(){return new r(this,e)}}return function entries(){return new r(this,e)}},k=t+" Iterator",w="values"==m,D=!1,C=e.prototype,x=C[p]||C["@@iterator"]||m&&C[m],S=x||b(m),P=m?w?b("entries"):S:void 0,R="Array"==t&&C.entries||x;if(R&&(M=s(R.call(new e)))!==Object.prototype&&M.next&&(c(M,k,!0),n||"function"==typeof M[p]||i(M,p,d)),w&&x&&"values"!==x.name&&(D=!0,S=function values(){return x.call(this)}),n&&!v||!f&&!D&&C[p]||i(C,p,S),u[t]=S,u[k]=d,m)if(y={values:w?S:b("values"),keys:g?S:b("keys"),entries:P},v)for(_ in y)_ in C||o(C,_,y[_]);else a(a.P+a.F*(f||D),t,y);return y}},function(e,t,r){e.exports=r(21)},function(e,t,r){var n=r(20),a=r(19),o=r(87)(!1),i=r(37)("IE_PROTO");e.exports=function(e,t){var r,u=a(e),l=0,c=[];for(r in u)r!=i&&n(u,r)&&c.push(r);for(;t.length>l;)n(u,r=t[l++])&&(~o(c,r)||c.push(r));return c}},function(e,t,r){var n=r(27);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},function(e,t,r){var n=r(42),a=Math.min;e.exports=function(e){return e>0?a(n(e),9007199254740991):0}},function(e,t,r){var n=r(11).document;e.exports=n&&n.documentElement},function(e,t,r){r(89);for(var n=r(11),a=r(21),o=r(25),i=r(12)("toStringTag"),u="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),l=0;l<u.length;l++){var c=u[l],s=n[c],p=s&&s.prototype;p&&!p[i]&&a(p,i,c),o[c]=o.Array}},function(e,t,r){var n=r(59),a=r(44).concat("length","prototype");t.f=Object.getOwnPropertyNames||function getOwnPropertyNames(e){return n(e,a)}},function(e,t){},function(e,t,r){"use strict";t.__esModule=!0;var n=_interopRequireDefault(r(0)),a=_interopRequireDefault(r(4));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}t.default=function get(e,t,r){null===e&&(e=Function.prototype);var o=(0,a.default)(e,t);if(void 0===o){var i=(0,n.default)(e);return null===i?void 0:get(i,t,r)}if("value"in o)return o.value;var u=o.get;return void 0!==u?u.call(r):void 0}},function(e,t,r){var n=r(27),a=r(12)("toStringTag"),o="Arguments"==n(function(){return arguments}());e.exports=function(e){var t,r,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),a))?r:o?n(t):"Object"==(i=n(t))&&"function"==typeof t.callee?"Arguments":i}},function(e,t,r){var n=r(15),a=r(30),o=r(12)("species");e.exports=function(e,t){var r,i=n(e).constructor;return void 0===i||null==(r=n(i)[o])?t:a(r)}},function(e,t,r){var n,a,o,i=r(24),u=r(122),l=r(62),c=r(39),s=r(11),p=s.process,f=s.setImmediate,d=s.clearImmediate,h=s.MessageChannel,m=s.Dispatch,g=0,v={},y=function(){var e=+this;if(v.hasOwnProperty(e)){var t=v[e];delete v[e],t()}},_=function(e){y.call(e.data)};f&&d||(f=function setImmediate(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return v[++g]=function(){u("function"==typeof e?e:Function(e),t)},n(g),g},d=function clearImmediate(e){delete v[e]},"process"==r(27)(p)?n=function(e){p.nextTick(i(y,e,1))}:m&&m.now?n=function(e){m.now(i(y,e,1))}:h?(o=(a=new h).port2,a.port1.onmessage=_,n=i(o.postMessage,o,1)):s.addEventListener&&"function"==typeof postMessage&&!s.importScripts?(n=function(e){s.postMessage(e+"","*")},s.addEventListener("message",_,!1)):n="onreadystatechange"in c("script")?function(e){l.appendChild(c("script")).onreadystatechange=function(){l.removeChild(this),y.call(e)}}:function(e){setTimeout(i(y,e,1),0)}),e.exports={set:f,clear:d}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,r){var n=r(15),a=r(17),o=r(50);e.exports=function(e,t){if(n(e),a(t)&&t.constructor===e)return t;var r=o.f(e);return(0,r.resolve)(t),r.promise}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChatCollectionManager=t.ChatManager=t.MsgLoadStateManager=void 0;var n,a,o=_interopRequireDefault(r(4)),i=_interopRequireDefault(r(6)),u=_interopRequireDefault(r(49)),l=_interopRequireDefault(r(7)),c=_interopRequireDefault(r(13)),s=_interopRequireDefault(r(8)),p=_interopRequireDefault(r(0)),f=_interopRequireDefault(r(3)),d=_interopRequireDefault(r(1)),h=_interopRequireDefault(r(2)),m=_interopRequireDefault(r(138)),g=r(5),v=r(10),y=r(34),_=r(51),M=r(75),b=r(76),k=r(52),w=r(77),D=r(78);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _applyDecoratedDescriptor(e,t,r,n,a){var o={};return Object.keys(n).forEach(function(e){o[e]=n[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},o),a&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(a):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var C=t.MsgLoadStateManager=function(e){function MsgLoadStateManager(){return(0,f.default)(this,MsgLoadStateManager),(0,d.default)(this,(MsgLoadStateManager.__proto__||(0,p.default)(MsgLoadStateManager)).apply(this,arguments))}return(0,h.default)(MsgLoadStateManager,e),MsgLoadStateManager}(v.ModelManager),x=t.ChatManager=(_applyDecoratedDescriptor((n=function(e){function ChatManager(e){(0,f.default)(this,ChatManager);var t=(0,d.default)(this,(ChatManager.__proto__||(0,p.default)(ChatManager)).call(this,e));t.addSubmanager("msgs",new k.MessageCollectionManager(e.msgs)),t.addSubmanager("msgLoadState",new C(e.msgs.msgLoadState));try{t.addSubmanager("metadata",new M.GroupMetadataManager(t.model.groupMetadata))}catch(e){}return t.addSubmanager("presence",new D.PresenceManager(t.model.presence)),t.addSubmanager("contact",new y.ContactManager(t.model.contact)),t.addSubmanager("mute",new w.MuteManager(t.model.mute)),t.model.liveLocation&&t.addSubmanager("liveLocation",new b.LiveLocationManager(t.model.liveLocation)),t}return(0,h.default)(ChatManager,e),(0,s.default)(ChatManager,null,[{key:"mapModel",value:function mapModel(e){return(0,c.default)(v.ModelManager.mapModel(e),{id:e.id._serialized,kind:e.kind,isGroup:e.isGroup,contact:e.contact?y.ContactManager.mapModel(e.contact):null,groupMetadata:e.groupMetadata?M.GroupMetadataManager.mapModel(e.groupMetadata):null,lastReceivedKey:e.lastReceivedKey?e.lastReceivedKey._serialized:null,msgs:null,mute:w.MuteManager.mapModel(e.mute),liveLocationQueried:e.liveLocationQueried})}}]),(0,s.default)(ChatManager,[{key:"_sendMessage",value:function(){var e=(0,l.default)(i.default.mark(function _callee(e,t){var r,n,a;return i.default.wrap(function _callee$(o){for(;;)switch(o.prev=o.next){case 0:return r=this.model,n=new u.default(function(n){r.msgs.on("add",function handler(e){try{e.isNewMsg&&e.isSentByMeFromWeb&&t(e)&&(r.msgs.off("add",handler),n(e))}catch(e){console.error(e)}}),e()}),o.next=4,n;case 4:if(!(a=o.sent).promises.sendPromise){o.next=14;break}return o.prev=6,o.next=9,a.promises.sendPromise;case 9:o.next=14;break;case 11:throw o.prev=11,o.t0=o.catch(6),new _.SendMessageFail("Send message "+a.id._serialized+" to chat "+this.model.id+" fail",{msgId:a.id._serialized,chatId:this.model.id});case 14:return o.abrupt("return",a.id._serialized);case 15:case"end":return o.stop()}},_callee,this,[[6,11]])}));return function _sendMessage(t,r){return e.apply(this,arguments)}}()},{key:"sendText",value:function(){var e=(0,l.default)(i.default.mark(function _callee2(e){var t,r,n=this,a=e.text,o=e.quotedMsgId,u=e.mentions,l=e.linkDesc;return i.default.wrap(function _callee2$(e){for(;;)switch(e.prev=e.next){case 0:if(t={},o&&(r=this.model.msgs.get(o))&&(t.quotedMsg=r),u&&u.length&&(t.mentionedJidList=u),t.quotedMsg){e.next=11;break}if(!l){e.next=8;break}t.linkPreview=l,e.next=11;break;case 8:return e.next=10,manager.getSubmanager("wap").queryLinkPreview({text:a});case 10:t.linkPreview=e.sent;case 11:return this.model,e.next=14,this._sendMessage(function(){return n.model.sendMessage(a,t)},function(e){return e.body===a&&"chat"===e.type});case 14:return e.abrupt("return",e.sent);case 15:case"end":return e.stop()}},_callee2,this)}));return function sendText(t){return e.apply(this,arguments)}}()},{key:"_sendContact",value:function(){var e=(0,l.default)(i.default.mark(function _callee3(e,t){var r,n=this;return i.default.wrap(function _callee3$(a){for(;;)switch(a.prev=a.next){case 0:return r=void 0,t&&(r=this.model.msgs.get(t)),a.next=4,this._sendMessage(function(){return n.model.sendContact(e,r)},function(e){return e.subtype&&"vcard"===e.type});case 4:return a.abrupt("return",a.sent);case 5:case"end":return a.stop()}},_callee3,this)}));return function _sendContact(t,r){return e.apply(this,arguments)}}()},{key:"sendContactPhone",value:function(){var e=(0,l.default)(i.default.mark(function _callee4(e){var t,r=e.contactName,n=e.phoneNumber,a=e.quotedMsgId;return i.default.wrap(function _callee4$(e){for(;;)switch(e.prev=e.next){case 0:return t=new manager.getSubmanager("contacts").collection._model({id:n+"@c.us",name:r}),e.next=3,this._sendContact(t,a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},_callee4,this)}));return function sendContactPhone(t){return e.apply(this,arguments)}}()},{key:"sendContact",value:function(){var e=(0,l.default)(i.default.mark(function _callee5(e){var t,r=e.contactId,n=e.quotedMsgId;return i.default.wrap(function _callee5$(e){for(;;)switch(e.prev=e.next){case 0:if(t=manager.getSubmanager("contacts").collection.get(r)){e.next=3;break}throw(0,_.ModelNotFound)('Contact with ID "'+r+'" not found');case 3:return e.next=5,this._sendContact(t,n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},_callee5,this)}));return function sendContact(t){return e.apply(this,arguments)}}()},{key:"sendMedia",value:function(){var e=(0,l.default)(i.default.mark(function _callee6(e){var t,r,n,a,o=this,u=e.mediaData,l=e.contentType,c=e.filename,s=e.caption,p=e.quotedMsgId,f=e.mentions;return i.default.wrap(function _callee6$(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,m.default)(u,l),c&&(t=new File([t],c,{type:l})),r=this.buildMediaCollection(),e.next=5,r.processFiles([t],this.model,1);case 5:return n=r.models[0],a={},s&&(a.caption=s),p&&(a.quotedMsg=this.model.msgs.get(p)),f&&f.length&&(a.mentionedJidList=f),e.next=12,n.processPromise;case 12:return e.next=14,this._sendMessage(function(){return n.sendToChat(o.model,a)},function(e){return(e.isMedia||e.isDoc)&&e.mediaData.filehash===n.mediaPrep._mediaData.filehash});case 14:return e.abrupt("return",e.sent);case 15:case"end":return e.stop()}},_callee6,this)}));return function sendMedia(t){return e.apply(this,arguments)}}()},{key:"leaveGroup",value:function(){var e=(0,l.default)(i.default.mark(function _callee7(){return i.default.wrap(function _callee7$(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.model.sendExit();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},_callee7,this)}));return function leaveGroup(){return e.apply(this,arguments)}}()},{key:"deleteChat",value:function(){var e=(0,l.default)(i.default.mark(function _callee8(){return i.default.wrap(function _callee8$(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.model.sendDelete();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},_callee8,this)}));return function deleteChat(){return e.apply(this,arguments)}}()},{key:"sendSeen",value:function(){var e=(0,l.default)(i.default.mark(function _callee9(){return i.default.wrap(function _callee9$(e){for(;;)switch(e.prev=e.next){case 0:return this.stream.markAvailable(),e.next=3,this.model.sendSeen();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},_callee9,this)}));return function sendSeen(){return e.apply(this,arguments)}}()},{key:"loadEarlierMessages",value:function(){var e=(0,l.default)(i.default.mark(function _callee10(){return i.default.wrap(function _callee10$(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.model.loadEarlierMsgs();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},_callee10,this)}));return function loadEarlierMessages(){return e.apply(this,arguments)}}()},{key:"loadAllEarlierMessages",value:function(){var e=(0,l.default)(i.default.mark(function _callee11(){return i.default.wrap(function _callee11$(e){for(;;)switch(e.prev=e.next){case 0:if(this.model.msgs.msgLoadState.noEarlierMsgs){e.next=5;break}return e.next=3,this.model.loadEarlierMsgs();case 3:e.next=0;break;case 5:case"end":return e.stop()}},_callee11,this)}));return function loadAllEarlierMessages(){return e.apply(this,arguments)}}()},{key:"setSubject",value:function(){var e=(0,l.default)(i.default.mark(function _callee12(e){var t=e.subject;return i.default.wrap(function _callee12$(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.model.setSubject(t);case 2:case"end":return e.stop()}},_callee12,this)}));return function setSubject(t){return e.apply(this,arguments)}}()},{key:"markComposing",value:function(){var e=(0,l.default)(i.default.mark(function _callee13(){return i.default.wrap(function _callee13$(e){for(;;)switch(e.prev=e.next){case 0:this.model.markComposing();case 1:case"end":return e.stop()}},_callee13,this)}));return function markComposing(){return e.apply(this,arguments)}}()},{key:"markRecording",value:function(){var e=(0,l.default)(i.default.mark(function _callee14(){return i.default.wrap(function _callee14$(e){for(;;)switch(e.prev=e.next){case 0:this.model.markRecording();case 1:case"end":return e.stop()}},_callee14,this)}));return function markRecording(){return e.apply(this,arguments)}}()},{key:"markPaused",value:function(){var e=(0,l.default)(i.default.mark(function _callee15(){return i.default.wrap(function _callee15$(e){for(;;)switch(e.prev=e.next){case 0:this.model.markPaused();case 1:case"end":return e.stop()}},_callee15,this)}));return function markPaused(){return e.apply(this,arguments)}}()},{key:"canSend",value:function(){var e=(0,l.default)(i.default.mark(function _callee16(){return i.default.wrap(function _callee16$(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.model.canSend());case 1:case"end":return e.stop()}},_callee16,this)}));return function canSend(){return e.apply(this,arguments)}}()},{key:"canArchive",value:function(){var e=(0,l.default)(i.default.mark(function _callee17(){return i.default.wrap(function _callee17$(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.model.canArchive());case 1:case"end":return e.stop()}},_callee17,this)}));return function canArchive(){return e.apply(this,arguments)}}()},{key:"canPin",value:function(){var e=(0,l.default)(i.default.mark(function _callee18(){return i.default.wrap(function _callee18$(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.model.canPin());case 1:case"end":return e.stop()}},_callee18,this)}));return function canPin(){return e.apply(this,arguments)}}()},{key:"setArchive",value:function(){var e=(0,l.default)(i.default.mark(function _callee19(e){var t=e.archive;return i.default.wrap(function _callee19$(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.model.setArchive(t);case 2:if(200!==e.sent.status){e.next=5;break}return e.abrupt("return",!0);case 5:return e.abrupt("return",!1);case 6:case"end":return e.stop()}},_callee19,this)}));return function setArchive(t){return e.apply(this,arguments)}}()},{key:"setPin",value:function(){var e=(0,l.default)(i.default.mark(function _callee20(e){var t=e.pin;return i.default.wrap(function _callee20$(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.model.setPin(t);case 2:if(200!==e.sent.status){e.next=5;break}return e.abrupt("return",!0);case 5:return e.abrupt("return",!1);case 6:case"end":return e.stop()}},_callee20,this)}));return function setPin(t){return e.apply(this,arguments)}}()},{key:"setGroupDesc",value:function(){var e=(0,l.default)(i.default.mark(function _callee21(e){var t=e.description;return i.default.wrap(function _callee21$(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.model.setGroupDesc(t);case 2:if(200!==e.sent.status){e.next=5;break}return e.abrupt("return",!0);case 5:return e.abrupt("return",!1);case 6:case"end":return e.stop()}},_callee21,this)}));return function setGroupDesc(t){return e.apply(this,arguments)}}()},{key:"sendStarMsgs",value:function(){var e=(0,l.default)(i.default.mark(function _callee22(e){var t=e.messageIds;return i.default.wrap(function _callee22$(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.model.sendStarMsgs(t);case 2:if(200!==e.sent.status){e.next=5;break}return e.abrupt("return",!0);case 5:return e.abrupt("return",!1);case 6:case"end":return e.stop()}},_callee22,this)}));return function sendStarMsgs(t){return e.apply(this,arguments)}}()},{key:"sendUnstarMsgs",value:function(){var e=(0,l.default)(i.default.mark(function _callee23(e){var t=e.messageIds;return i.default.wrap(function _callee23$(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.model.sendUnstarMsgs(t);case 2:if(200!==e.sent.status){e.next=5;break}return e.abrupt("return",!0);case 5:return e.abrupt("return",!1);case 6:case"end":return e.stop()}},_callee23,this)}));return function sendUnstarMsgs(t){return e.apply(this,arguments)}}()},{key:"sendNotSpam",value:function(){var e=(0,l.default)(i.default.mark(function _callee24(){return i.default.wrap(function _callee24$(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.model.sendNotSpam();case 2:if(200!==e.sent.status){e.next=5;break}return e.abrupt("return",!0);case 5:return e.abrupt("return",!1);case 6:case"end":return e.stop()}},_callee24,this)}));return function sendNotSpam(){return e.apply(this,arguments)}}()},{key:"sendSpamReport",value:function(){var e=(0,l.default)(i.default.mark(function _callee25(){return i.default.wrap(function _callee25$(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.model.sendSpamReport();case 2:if(200!==e.sent.status){e.next=5;break}return e.abrupt("return",!0);case 5:return e.abrupt("return",!1);case 6:case"end":return e.stop()}},_callee25,this)}));return function sendSpamReport(){return e.apply(this,arguments)}}()},{key:"findLiveLocation",value:function(){var e=(0,l.default)(i.default.mark(function _callee26(){return i.default.wrap(function _callee26$(e){for(;;)switch(e.prev=e.next){case 0:if(this.model.liveLocation){e.next=4;break}return e.next=3,manager.getSubmanager("liveLocations").findItem(this.model.id);case 3:this.addSubmanager("liveLocation",new b.LiveLocationManager(this.model.liveLocation));case 4:return e.abrupt("return",b.LiveLocationManager.mapModel(this.model.liveLocation));case 5:case"end":return e.stop()}},_callee26,this)}));return function findLiveLocation(){return e.apply(this,arguments)}}()}]),ChatManager}(v.ModelManager)).prototype,"sendText",[g.command],(0,o.default)(n.prototype,"sendText"),n.prototype),_applyDecoratedDescriptor(n.prototype,"sendContactPhone",[g.command],(0,o.default)(n.prototype,"sendContactPhone"),n.prototype),_applyDecoratedDescriptor(n.prototype,"sendContact",[g.command],(0,o.default)(n.prototype,"sendContact"),n.prototype),_applyDecoratedDescriptor(n.prototype,"sendMedia",[g.command],(0,o.default)(n.prototype,"sendMedia"),n.prototype),_applyDecoratedDescriptor(n.prototype,"leaveGroup",[g.command],(0,o.default)(n.prototype,"leaveGroup"),n.prototype),_applyDecoratedDescriptor(n.prototype,"deleteChat",[g.command],(0,o.default)(n.prototype,"deleteChat"),n.prototype),_applyDecoratedDescriptor(n.prototype,"sendSeen",[g.command],(0,o.default)(n.prototype,"sendSeen"),n.prototype),_applyDecoratedDescriptor(n.prototype,"loadEarlierMessages",[g.command],(0,o.default)(n.prototype,"loadEarlierMessages"),n.prototype),_applyDecoratedDescriptor(n.prototype,"loadAllEarlierMessages",[g.command],(0,o.default)(n.prototype,"loadAllEarlierMessages"),n.prototype),_applyDecoratedDescriptor(n.prototype,"setSubject",[g.command],(0,o.default)(n.prototype,"setSubject"),n.prototype),_applyDecoratedDescriptor(n.prototype,"markComposing",[g.command],(0,o.default)(n.prototype,"markComposing"),n.prototype),_applyDecoratedDescriptor(n.prototype,"markRecording",[g.command],(0,o.default)(n.prototype,"markRecording"),n.prototype),_applyDecoratedDescriptor(n.prototype,"markPaused",[g.command],(0,o.default)(n.prototype,"markPaused"),n.prototype),_applyDecoratedDescriptor(n.prototype,"canSend",[g.command],(0,o.default)(n.prototype,"canSend"),n.prototype),_applyDecoratedDescriptor(n.prototype,"canArchive",[g.command],(0,o.default)(n.prototype,"canArchive"),n.prototype),_applyDecoratedDescriptor(n.prototype,"canPin",[g.command],(0,o.default)(n.prototype,"canPin"),n.prototype),_applyDecoratedDescriptor(n.prototype,"setArchive",[g.command],(0,o.default)(n.prototype,"setArchive"),n.prototype),_applyDecoratedDescriptor(n.prototype,"setPin",[g.command],(0,o.default)(n.prototype,"setPin"),n.prototype),_applyDecoratedDescriptor(n.prototype,"setGroupDesc",[g.command],(0,o.default)(n.prototype,"setGroupDesc"),n.prototype),_applyDecoratedDescriptor(n.prototype,"sendStarMsgs",[g.command],(0,o.default)(n.prototype,"sendStarMsgs"),n.prototype),_applyDecoratedDescriptor(n.prototype,"sendUnstarMsgs",[g.command],(0,o.default)(n.prototype,"sendUnstarMsgs"),n.prototype),_applyDecoratedDescriptor(n.prototype,"sendNotSpam",[g.command],(0,o.default)(n.prototype,"sendNotSpam"),n.prototype),_applyDecoratedDescriptor(n.prototype,"sendSpamReport",[g.command],(0,o.default)(n.prototype,"sendSpamReport"),n.prototype),_applyDecoratedDescriptor(n.prototype,"findLiveLocation",[g.command],(0,o.default)(n.prototype,"findLiveLocation"),n.prototype),n);t.ChatCollectionManager=(_applyDecoratedDescriptor((a=function(e){function ChatCollectionManager(e,t,r,n,a){(0,f.default)(this,ChatCollectionManager);var o=(0,d.default)(this,(ChatCollectionManager.__proto__||(0,p.default)(ChatCollectionManager)).call(this,e));return x.prototype.buildMediaCollection=function(){return new t},x.prototype.stream=n,o.wap=a,o.createPeerForContact=function(e){return new r(e)},o}return(0,h.default)(ChatCollectionManager,e),(0,s.default)(ChatCollectionManager,null,[{key:"getModelManagerClass",value:function getModelManagerClass(){return x}}]),(0,s.default)(ChatCollectionManager,[{key:"getActive",value:function(){var e=(0,l.default)(i.default.mark(function _callee27(){return i.default.wrap(function _callee27$(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.collection.active());case 1:case"end":return e.stop()}},_callee27,this)}));return function getActive(){return e.apply(this,arguments)}}()},{key:"ensureChatWithContact",value:function(){var e=(0,l.default)(i.default.mark(function _callee28(e){var t,r=e.contactId;return i.default.wrap(function _callee28$(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.collection.get(r)){e.next=5;break}return e.next=4,this.collection.find(this.createPeerForContact(r));case 4:t=e.sent;case 5:return e.abrupt("return",this.constructor.getModelManagerClass().mapModel(t));case 6:case"end":return e.stop()}},_callee28,this)}));return function ensureChatWithContact(t){return e.apply(this,arguments)}}()},{key:"resyncMessages",value:function(){var e=(0,l.default)(i.default.mark(function _callee29(){return i.default.wrap(function _callee29$(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.collection.resyncMessages();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},_callee29,this)}));return function resyncMessages(){return e.apply(this,arguments)}}()},{key:"createGroup",value:function(){var e=(0,l.default)(i.default.mark(function _callee30(e){var t=e.name,r=e.contactIds,n=e.picturePreview,a=e.picture;return i.default.wrap(function _callee30$(e){for(;;)switch(e.prev=e.next){case 0:return n&&(n="data:image/jpeg;base64,"+n),a&&(a="data:image/jpeg;base64,"+a),e.next=4,this.collection.createGroup(t,n,a,r.map(function(e){return manager.getSubmanager("contacts").collection.get(e)}).filter(Boolean));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},_callee30,this)}));return function createGroup(t){return e.apply(this,arguments)}}()},{key:"forwardMessagesToChats",value:function(){var e=(0,l.default)(i.default.mark(function _callee31(e){var t,r,n=this,a=e.messageIds,o=e.chatIds;return i.default.wrap(function _callee31$(e){for(;;)switch(e.prev=e.next){case 0:return t=a.map(function(e){return manager.getSubmanager("messages").loadItem(e)}),r=o.map(function(e){return n.loadItem(e)}),e.next=4,this.collection.forwardMessagesToChats(t,r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},_callee31,this)}));return function forwardMessagesToChats(t){return e.apply(this,arguments)}}()}]),ChatCollectionManager}(v.CollectionManager)).prototype,"getActive",[g.command],(0,o.default)(a.prototype,"getActive"),a.prototype),_applyDecoratedDescriptor(a.prototype,"ensureChatWithContact",[g.command],(0,o.default)(a.prototype,"ensureChatWithContact"),a.prototype),_applyDecoratedDescriptor(a.prototype,"resyncMessages",[g.command],(0,o.default)(a.prototype,"resyncMessages"),a.prototype),_applyDecoratedDescriptor(a.prototype,"createGroup",[g.command],(0,o.default)(a.prototype,"createGroup"),a.prototype),_applyDecoratedDescriptor(a.prototype,"forwardMessagesToChats",[g.command],(0,o.default)(a.prototype,"forwardMessagesToChats"),a.prototype),a)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProfilePicThumbCollectionManager=t.ProfilePicThumbManager=void 0;var n,a=_interopRequireDefault(r(4)),o=_interopRequireDefault(r(13)),i=_interopRequireDefault(r(6)),u=_interopRequireDefault(r(7)),l=_interopRequireDefault(r(0)),c=_interopRequireDefault(r(3)),s=_interopRequireDefault(r(8)),p=_interopRequireDefault(r(1)),f=_interopRequireDefault(r(2)),d=r(5),h=r(10);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _applyDecoratedDescriptor(e,t,r,n,a){var o={};return Object.keys(n).forEach(function(e){o[e]=n[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},o),a&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(a):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var m=t.ProfilePicThumbManager=(_applyDecoratedDescriptor((n=function(e){function ProfilePicThumbManager(){return(0,c.default)(this,ProfilePicThumbManager),(0,p.default)(this,(ProfilePicThumbManager.__proto__||(0,l.default)(ProfilePicThumbManager)).apply(this,arguments))}return(0,f.default)(ProfilePicThumbManager,e),(0,s.default)(ProfilePicThumbManager,[{key:"canSet",value:function(){var e=(0,u.default)(i.default.mark(function _callee(){return i.default.wrap(function _callee$(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.model.canSet());case 1:case"end":return e.stop()}},_callee,this)}));return function canSet(){return e.apply(this,arguments)}}()},{key:"setPicture",value:function(){var e=(0,u.default)(i.default.mark(function _callee2(e){var t=e.picturePreview,r=e.picture;return i.default.wrap(function _callee2$(e){for(;;)switch(e.prev=e.next){case 0:return t&&(t="data:image/jpeg;base64,"+t),r&&(r="data:image/jpeg;base64,"+r),e.abrupt("return",this.model.setPicture(t,r));case 3:case"end":return e.stop()}},_callee2,this)}));return function setPicture(t){return e.apply(this,arguments)}}()},{key:"canDelete",value:function(){var e=(0,u.default)(i.default.mark(function _callee3(){return i.default.wrap(function _callee3$(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.model.canDelete());case 1:case"end":return e.stop()}},_callee3,this)}));return function canDelete(){return e.apply(this,arguments)}}()},{key:"deletePicture",value:function(){var e=(0,u.default)(i.default.mark(function _callee4(){return i.default.wrap(function _callee4$(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.model.deletePicture());case 1:case"end":return e.stop()}},_callee4,this)}));return function deletePicture(){return e.apply(this,arguments)}}()}],[{key:"mapModel",value:function mapModel(e){return(0,o.default)(h.ModelManager.mapModel(e),{id:e.id._serialized})}}]),ProfilePicThumbManager}(h.ModelManager)).prototype,"canSet",[d.command],(0,a.default)(n.prototype,"canSet"),n.prototype),_applyDecoratedDescriptor(n.prototype,"setPicture",[d.command],(0,a.default)(n.prototype,"setPicture"),n.prototype),_applyDecoratedDescriptor(n.prototype,"canDelete",[d.command],(0,a.default)(n.prototype,"canDelete"),n.prototype),_applyDecoratedDescriptor(n.prototype,"deletePicture",[d.command],(0,a.default)(n.prototype,"deletePicture"),n.prototype),n);t.ProfilePicThumbCollectionManager=function(e){function ProfilePicThumbCollectionManager(){return(0,c.default)(this,ProfilePicThumbCollectionManager),(0,p.default)(this,(ProfilePicThumbCollectionManager.__proto__||(0,l.default)(ProfilePicThumbCollectionManager)).apply(this,arguments))}return(0,f.default)(ProfilePicThumbCollectionManager,e),(0,s.default)(ProfilePicThumbCollectionManager,null,[{key:"getModelManagerClass",value:function getModelManagerClass(){return m}}]),ProfilePicThumbCollectionManager}(h.CollectionManager)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StatusCollectionManager=t.StatusManager=void 0;var n,a=_interopRequireDefault(r(4)),o=_interopRequireDefault(r(6)),i=_interopRequireDefault(r(7)),u=_interopRequireDefault(r(13)),l=_interopRequireDefault(r(0)),c=_interopRequireDefault(r(3)),s=_interopRequireDefault(r(8)),p=_interopRequireDefault(r(1)),f=_interopRequireDefault(r(2)),d=r(5),h=r(10);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var m=t.StatusManager=function(e){function StatusManager(){return(0,c.default)(this,StatusManager),(0,p.default)(this,(StatusManager.__proto__||(0,l.default)(StatusManager)).apply(this,arguments))}return(0,f.default)(StatusManager,e),(0,s.default)(StatusManager,null,[{key:"mapModel",value:function mapModel(e){return(0,u.default)(h.ModelManager.mapModel(e),{id:e.id._serialized})}}]),StatusManager}(h.ModelManager);t.StatusCollectionManager=(function _applyDecoratedDescriptor(e,t,r,n,a){var o={};return Object.keys(n).forEach(function(e){o[e]=n[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},o),a&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(a):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}((n=function(e){function StatusCollectionManager(){return(0,c.default)(this,StatusCollectionManager),(0,p.default)(this,(StatusCollectionManager.__proto__||(0,l.default)(StatusCollectionManager)).apply(this,arguments))}return(0,f.default)(StatusCollectionManager,e),(0,s.default)(StatusCollectionManager,[{key:"setMyStatus",value:function(){var e=(0,i.default)(o.default.mark(function _callee(e){var t=e.status;return o.default.wrap(function _callee$(e){for(;;)switch(e.prev=e.next){case 0:if(200!==this.collection.setMyStatus(t).status){e.next=3;break}return e.abrupt("return",!0);case 3:return e.abrupt("return",!1);case 4:case"end":return e.stop()}},_callee,this)}));return function setMyStatus(t){return e.apply(this,arguments)}}()}],[{key:"getModelManagerClass",value:function getModelManagerClass(){return m}}]),StatusCollectionManager}(h.CollectionManager)).prototype,"setMyStatus",[d.command],(0,a.default)(n.prototype,"setMyStatus"),n.prototype),n)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GroupMetadataCollectionManager=t.GroupMetadataManager=t.ParticipantCollectionManager=t.ParticipantManager=void 0;var n,a,o=_interopRequireDefault(r(4)),i=_interopRequireDefault(r(6)),u=_interopRequireDefault(r(7)),l=_interopRequireDefault(r(13)),c=_interopRequireDefault(r(0)),s=_interopRequireDefault(r(3)),p=_interopRequireDefault(r(8)),f=_interopRequireDefault(r(1)),d=_interopRequireDefault(r(2)),h=r(5),m=r(10);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _applyDecoratedDescriptor(e,t,r,n,a){var o={};return Object.keys(n).forEach(function(e){o[e]=n[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},o),a&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(a):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var g=t.ParticipantManager=function(e){function ParticipantManager(){return(0,s.default)(this,ParticipantManager),(0,f.default)(this,(ParticipantManager.__proto__||(0,c.default)(ParticipantManager)).apply(this,arguments))}return(0,d.default)(ParticipantManager,e),(0,p.default)(ParticipantManager,null,[{key:"mapModel",value:function mapModel(e){return(0,l.default)(m.ModelManager.mapModel(e),{id:e.id._serialized})}}]),ParticipantManager}(m.ModelManager),v=t.ParticipantCollectionManager=(_applyDecoratedDescriptor((n=function(e){function ParticipantCollectionManager(){return(0,s.default)(this,ParticipantCollectionManager),(0,f.default)(this,(ParticipantCollectionManager.__proto__||(0,c.default)(ParticipantCollectionManager)).apply(this,arguments))}return(0,d.default)(ParticipantCollectionManager,e),(0,p.default)(ParticipantCollectionManager,[{key:"_getParticipants",value:function _getParticipants(e){var t=this;return e.map(function(e){return t.collection.get(e)}).filter(Boolean)}},{key:"_getContacts",value:function _getContacts(e){return e.map(function(e){return manager.getSubmanager("contacts").collection.get(e)}).filter(Boolean)}},{key:"addParticipants",value:function(){var e=(0,u.default)(i.default.mark(function _callee(e){var t,r=e.contactIds;return i.default.wrap(function _callee$(e){for(;;)switch(e.prev=e.next){case 0:return t=this._getContacts(r),e.next=3,this.collection.addParticipants(t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},_callee,this)}));return function addParticipants(t){return e.apply(this,arguments)}}()},{key:"canAdd",value:function(){var e=(0,u.default)(i.default.mark(function _callee2(e){var t=e.contactId;return i.default.wrap(function _callee2$(e){for(;;)switch(e.prev=e.next){case 0:if(manager.getSubmanager("contacts").collection.get(t)){e.next=3;break}return e.abrupt("return",!1);case 3:return e.abrupt("return",this.collection.canAdd(contacts));case 4:case"end":return e.stop()}},_callee2,this)}));return function canAdd(t){return e.apply(this,arguments)}}()},{key:"removeParticipants",value:function(){var e=(0,u.default)(i.default.mark(function _callee3(e){var t,r=e.contactIds;return i.default.wrap(function _callee3$(e){for(;;)switch(e.prev=e.next){case 0:return t=this._getParticipants(r),e.next=3,this.collection.removeParticipants(t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},_callee3,this)}));return function removeParticipants(t){return e.apply(this,arguments)}}()},{key:"canRemove",value:function(){var e=(0,u.default)(i.default.mark(function _callee4(e){var t,r=e.contactId;return i.default.wrap(function _callee4$(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.collection.get(r)){e.next=3;break}return e.abrupt("return",!1);case 3:return e.abrupt("return",this.collection.canRemove(t));case 4:case"end":return e.stop()}},_callee4,this)}));return function canRemove(t){return e.apply(this,arguments)}}()},{key:"promoteParticipants",value:function(){var e=(0,u.default)(i.default.mark(function _callee5(e){var t,r=e.contactIds;return i.default.wrap(function _callee5$(e){for(;;)switch(e.prev=e.next){case 0:return t=this._getParticipants(r),e.next=3,this.collection.promoteParticipants(t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},_callee5,this)}));return function promoteParticipants(t){return e.apply(this,arguments)}}()},{key:"canPromote",value:function(){var e=(0,u.default)(i.default.mark(function _callee6(e){var t,r=e.contactId;return i.default.wrap(function _callee6$(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.collection.get(r)){e.next=3;break}return e.abrupt("return",!1);case 3:return e.abrupt("return",this.collection.canPromote(t));case 4:case"end":return e.stop()}},_callee6,this)}));return function canPromote(t){return e.apply(this,arguments)}}()},{key:"demoteParticipants",value:function(){var e=(0,u.default)(i.default.mark(function _callee7(e){var t,r=e.contactIds;return i.default.wrap(function _callee7$(e){for(;;)switch(e.prev=e.next){case 0:return t=this._getParticipants(r),e.next=3,this.collection.demoteParticipants(t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},_callee7,this)}));return function demoteParticipants(t){return e.apply(this,arguments)}}()},{key:"canDemote",value:function(){var e=(0,u.default)(i.default.mark(function _callee8(e){var t,r=e.contactId;return i.default.wrap(function _callee8$(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.collection.get(r)){e.next=3;break}return e.abrupt("return",!1);case 3:return e.abrupt("return",this.collection.canDemote(t));case 4:case"end":return e.stop()}},_callee8,this)}));return function canDemote(t){return e.apply(this,arguments)}}()}],[{key:"getModelManagerClass",value:function getModelManagerClass(){return g}}]),ParticipantCollectionManager}(m.CollectionManager)).prototype,"addParticipants",[h.command],(0,o.default)(n.prototype,"addParticipants"),n.prototype),_applyDecoratedDescriptor(n.prototype,"canAdd",[h.command],(0,o.default)(n.prototype,"canAdd"),n.prototype),_applyDecoratedDescriptor(n.prototype,"removeParticipants",[h.command],(0,o.default)(n.prototype,"removeParticipants"),n.prototype),_applyDecoratedDescriptor(n.prototype,"canRemove",[h.command],(0,o.default)(n.prototype,"canRemove"),n.prototype),_applyDecoratedDescriptor(n.prototype,"promoteParticipants",[h.command],(0,o.default)(n.prototype,"promoteParticipants"),n.prototype),_applyDecoratedDescriptor(n.prototype,"canPromote",[h.command],(0,o.default)(n.prototype,"canPromote"),n.prototype),_applyDecoratedDescriptor(n.prototype,"demoteParticipants",[h.command],(0,o.default)(n.prototype,"demoteParticipants"),n.prototype),_applyDecoratedDescriptor(n.prototype,"canDemote",[h.command],(0,o.default)(n.prototype,"canDemote"),n.prototype),n),y=t.GroupMetadataManager=(_applyDecoratedDescriptor((a=function(e){function GroupMetadataManager(e){(0,s.default)(this,GroupMetadataManager);var t=(0,f.default)(this,(GroupMetadataManager.__proto__||(0,c.default)(GroupMetadataManager)).call(this,e));return t.addSubmanager("participants",new v(e.participants)),t}return(0,d.default)(GroupMetadataManager,e),(0,p.default)(GroupMetadataManager,null,[{key:"mapModel",value:function mapModel(e){return(0,l.default)(m.ModelManager.mapModel(e),{groupInviteLink:e.groupInviteLink,inviteCode:e.inviteCode})}}]),(0,p.default)(GroupMetadataManager,[{key:"groupInviteCode",value:function(){var e=(0,u.default)(i.default.mark(function _callee9(){return i.default.wrap(function _callee9$(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.model.groupInviteCode();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},_callee9,this)}));return function groupInviteCode(){return e.apply(this,arguments)}}()},{key:"revokeGroupInvite",value:function(){var e=(0,u.default)(i.default.mark(function _callee10(){return i.default.wrap(function _callee10$(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.model.revokeGroupInvite();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},_callee10,this)}));return function revokeGroupInvite(){return e.apply(this,arguments)}}()}]),GroupMetadataManager}(m.ModelManager)).prototype,"groupInviteCode",[h.command],(0,o.default)(a.prototype,"groupInviteCode"),a.prototype),_applyDecoratedDescriptor(a.prototype,"revokeGroupInvite",[h.command],(0,o.default)(a.prototype,"revokeGroupInvite"),a.prototype),a);t.GroupMetadataCollectionManager=function(e){function GroupMetadataCollectionManager(){return(0,s.default)(this,GroupMetadataCollectionManager),(0,f.default)(this,(GroupMetadataCollectionManager.__proto__||(0,c.default)(GroupMetadataCollectionManager)).apply(this,arguments))}return(0,d.default)(GroupMetadataCollectionManager,e),(0,p.default)(GroupMetadataCollectionManager,null,[{key:"getModelManagerClass",value:function getModelManagerClass(){return y}}]),GroupMetadataCollectionManager}(m.CollectionManager)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LiveLocationCollectionManager=t.LiveLocationManager=t.ParticipantCollectionManager=t.ParticipantManager=void 0;var n,a=_interopRequireDefault(r(4)),o=_interopRequireDefault(r(6)),i=_interopRequireDefault(r(7)),u=_interopRequireDefault(r(13)),l=_interopRequireDefault(r(0)),c=_interopRequireDefault(r(3)),s=_interopRequireDefault(r(8)),p=_interopRequireDefault(r(1)),f=_interopRequireDefault(r(2)),d=r(10),h=r(52),m=r(34),g=r(5);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _applyDecoratedDescriptor(e,t,r,n,a){var o={};return Object.keys(n).forEach(function(e){o[e]=n[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},o),a&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(a):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var v=t.ParticipantManager=function(e){function ParticipantManager(){return(0,c.default)(this,ParticipantManager),(0,p.default)(this,(ParticipantManager.__proto__||(0,l.default)(ParticipantManager)).apply(this,arguments))}return(0,f.default)(ParticipantManager,e),(0,s.default)(ParticipantManager,null,[{key:"mapModel",value:function mapModel(e){return(0,u.default)(d.ModelManager.mapModel(e),{id:e.id._serialized,msg:h.MessageManager.mapModel(e.msg),contact:m.ContactManager.mapModel(e.contact),isMe:e.isMe,isState:e.isState,valid:e.valid,disabled:e.disabled})}}]),ParticipantManager}(d.ModelManager),y=t.ParticipantCollectionManager=function(e){function ParticipantCollectionManager(){return(0,c.default)(this,ParticipantCollectionManager),(0,p.default)(this,(ParticipantCollectionManager.__proto__||(0,l.default)(ParticipantCollectionManager)).apply(this,arguments))}return(0,f.default)(ParticipantCollectionManager,e),(0,s.default)(ParticipantCollectionManager,null,[{key:"getModelManagerClass",value:function getModelManagerClass(){return v}}]),ParticipantCollectionManager}(d.CollectionManager),_=t.LiveLocationManager=(_applyDecoratedDescriptor((n=function(e){function LiveLocationManager(e){(0,c.default)(this,LiveLocationManager);var t=(0,p.default)(this,(LiveLocationManager.__proto__||(0,l.default)(LiveLocationManager)).call(this,e));return t.addSubmanager("participants",new y(e.participants)),t}return(0,f.default)(LiveLocationManager,e),(0,s.default)(LiveLocationManager,null,[{key:"mapModel",value:function mapModel(e){return(0,u.default)(d.ModelManager.mapModel(e),{id:e.id._serialized,participants:e.participants.map(function(e){return v.mapModel(e)})})}}]),(0,s.default)(LiveLocationManager,[{key:"subscribe",value:function(){var e=(0,i.default)(o.default.mark(function _callee(){return o.default.wrap(function _callee$(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.model.startViewingMap();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},_callee,this)}));return function subscribe(){return e.apply(this,arguments)}}()},{key:"unsubscribe",value:function(){var e=(0,i.default)(o.default.mark(function _callee2(){return o.default.wrap(function _callee2$(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.model.stopViewingMap();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},_callee2,this)}));return function unsubscribe(){return e.apply(this,arguments)}}()},{key:"stopMyLiveLocation",value:function(){var e=(0,i.default)(o.default.mark(function _callee3(){return o.default.wrap(function _callee3$(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.model.stopMyLiveLocation();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},_callee3,this)}));return function stopMyLiveLocation(){return e.apply(this,arguments)}}()}]),LiveLocationManager}(d.ModelManager)).prototype,"subscribe",[g.command],(0,a.default)(n.prototype,"subscribe"),n.prototype),_applyDecoratedDescriptor(n.prototype,"unsubscribe",[g.command],(0,a.default)(n.prototype,"unsubscribe"),n.prototype),_applyDecoratedDescriptor(n.prototype,"stopMyLiveLocation",[g.command],(0,a.default)(n.prototype,"stopMyLiveLocation"),n.prototype),n);t.LiveLocationCollectionManager=function(e){function LiveLocationCollectionManager(){return(0,c.default)(this,LiveLocationCollectionManager),(0,p.default)(this,(LiveLocationCollectionManager.__proto__||(0,l.default)(LiveLocationCollectionManager)).apply(this,arguments))}return(0,f.default)(LiveLocationCollectionManager,e),(0,s.default)(LiveLocationCollectionManager,null,[{key:"getModelManagerClass",value:function getModelManagerClass(){return _}}]),LiveLocationCollectionManager}(d.CollectionManager)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MuteCollectionManager=t.MuteManager=void 0;var n,a,o=_interopRequireDefault(r(4)),i=_interopRequireDefault(r(13)),u=_interopRequireDefault(r(6)),l=_interopRequireDefault(r(7)),c=_interopRequireDefault(r(0)),s=_interopRequireDefault(r(3)),p=_interopRequireDefault(r(8)),f=_interopRequireDefault(r(1)),d=_interopRequireDefault(r(2)),h=r(10),m=r(5),g=r(33);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _applyDecoratedDescriptor(e,t,r,n,a){var o={};return Object.keys(n).forEach(function(e){o[e]=n[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},o),a&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(a):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}t.MuteManager=(_applyDecoratedDescriptor((n=function(e){function MuteManager(){return(0,s.default)(this,MuteManager),(0,f.default)(this,(MuteManager.__proto__||(0,c.default)(MuteManager)).apply(this,arguments))}return(0,d.default)(MuteManager,e),(0,p.default)(MuteManager,[{key:"mute",value:function(){var e=(0,l.default)(u.default.mark(function _callee(e){var t=e.expiration;return u.default.wrap(function _callee$(e){for(;;)switch(e.prev=e.next){case 0:if("global_mute"!==this.model.id){e.next=2;break}throw(0,g.OperationNotAllowed)("Global mute can not be managed from Mute manager, use Mute collection.");case 2:return e.next=4,this.model.mute(t,!0);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},_callee,this)}));return function mute(t){return e.apply(this,arguments)}}()},{key:"canMute",value:function(){var e=(0,l.default)(u.default.mark(function _callee2(e){e.expiration;return u.default.wrap(function _callee2$(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.model.canMute());case 1:case"end":return e.stop()}},_callee2,this)}));return function canMute(t){return e.apply(this,arguments)}}()},{key:"unmute",value:function(){var e=(0,l.default)(u.default.mark(function _callee3(e){e.expiration;return u.default.wrap(function _callee3$(e){for(;;)switch(e.prev=e.next){case 0:if("global_mute"!==this.model.id){e.next=2;break}throw(0,g.OperationNotAllowed)("Global mute can not be managed from Mute manager, use Mute collection.");case 2:return e.next=4,this.model.unmute(!0);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},_callee3,this)}));return function unmute(t){return e.apply(this,arguments)}}()}],[{key:"mapModel",value:function mapModel(e){return(0,i.default)(h.ModelManager.mapModel(e),{id:e.id._serialized?e.id._serialized:e.id,isMuted:e.isMuted,isState:e.isState})}}]),MuteManager}(h.ModelManager)).prototype,"mute",[m.command],(0,o.default)(n.prototype,"mute"),n.prototype),_applyDecoratedDescriptor(n.prototype,"canMute",[m.command],(0,o.default)(n.prototype,"canMute"),n.prototype),_applyDecoratedDescriptor(n.prototype,"unmute",[m.command],(0,o.default)(n.prototype,"unmute"),n.prototype),n),t.MuteCollectionManager=(_applyDecoratedDescriptor((a=function(e){function MuteCollectionManager(){return(0,s.default)(this,MuteCollectionManager),(0,f.default)(this,(MuteCollectionManager.__proto__||(0,c.default)(MuteCollectionManager)).apply(this,arguments))}return(0,d.default)(MuteCollectionManager,e),(0,p.default)(MuteCollectionManager,[{key:"getGlobalNotifications",value:function(){var e=(0,l.default)(u.default.mark(function _callee4(){return u.default.wrap(function _callee4$(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.collection.getGlobalNotifications());case 1:case"end":return e.stop()}},_callee4,this)}));return function getGlobalNotifications(){return e.apply(this,arguments)}}()},{key:"setGlobalNotifications",value:function(){var e=(0,l.default)(u.default.mark(function _callee5(e){var t=e.state;return u.default.wrap(function _callee5$(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.collection.setGlobalNotifications(t));case 1:case"end":return e.stop()}},_callee5,this)}));return function setGlobalNotifications(t){return e.apply(this,arguments)}}()},{key:"getGlobalPreviews",value:function(){var e=(0,l.default)(u.default.mark(function _callee6(){return u.default.wrap(function _callee6$(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.collection.getGlobalPreviews());case 1:case"end":return e.stop()}},_callee6,this)}));return function getGlobalPreviews(){return e.apply(this,arguments)}}()},{key:"setGlobalPreviews",value:function(){var e=(0,l.default)(u.default.mark(function _callee7(e){var t=e.state;return u.default.wrap(function _callee7$(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.collection.setGlobalPreviews(t));case 1:case"end":return e.stop()}},_callee7,this)}));return function setGlobalPreviews(t){return e.apply(this,arguments)}}()},{key:"getGlobalSounds",value:function(){var e=(0,l.default)(u.default.mark(function _callee8(){return u.default.wrap(function _callee8$(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.collection.getGlobalSounds());case 1:case"end":return e.stop()}},_callee8,this)}));return function getGlobalSounds(){return e.apply(this,arguments)}}()},{key:"setGlobalSounds",value:function(){var e=(0,l.default)(u.default.mark(function _callee9(e){var t=e.state;return u.default.wrap(function _callee9$(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.collection.setGlobalSounds(t));case 1:case"end":return e.stop()}},_callee9,this)}));return function setGlobalSounds(t){return e.apply(this,arguments)}}()}],[{key:"getModelManagerClass",value:function getModelManagerClass(){return GroupMetadataManager}}]),MuteCollectionManager}(h.CollectionManager)).prototype,"getGlobalNotifications",[m.command],(0,o.default)(a.prototype,"getGlobalNotifications"),a.prototype),_applyDecoratedDescriptor(a.prototype,"setGlobalNotifications",[m.command],(0,o.default)(a.prototype,"setGlobalNotifications"),a.prototype),_applyDecoratedDescriptor(a.prototype,"getGlobalPreviews",[m.command],(0,o.default)(a.prototype,"getGlobalPreviews"),a.prototype),_applyDecoratedDescriptor(a.prototype,"setGlobalPreviews",[m.command],(0,o.default)(a.prototype,"setGlobalPreviews"),a.prototype),_applyDecoratedDescriptor(a.prototype,"getGlobalSounds",[m.command],(0,o.default)(a.prototype,"getGlobalSounds"),a.prototype),_applyDecoratedDescriptor(a.prototype,"setGlobalSounds",[m.command],(0,o.default)(a.prototype,"setGlobalSounds"),a.prototype),a)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PresenceCollectionManager=t.PresenceManager=t.ChatStateCollectionManager=t.ChatStateManager=void 0;var n,a=_interopRequireDefault(r(4)),o=_interopRequireDefault(r(6)),i=_interopRequireDefault(r(7)),u=_interopRequireDefault(r(13)),l=_interopRequireDefault(r(0)),c=_interopRequireDefault(r(3)),s=_interopRequireDefault(r(8)),p=_interopRequireDefault(r(1)),f=_interopRequireDefault(r(2)),d=r(5),h=r(10);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var m=t.ChatStateManager=function(e){function ChatStateManager(){return(0,c.default)(this,ChatStateManager),(0,p.default)(this,(ChatStateManager.__proto__||(0,l.default)(ChatStateManager)).apply(this,arguments))}return(0,f.default)(ChatStateManager,e),(0,s.default)(ChatStateManager,null,[{key:"mapModel",value:function mapModel(e){return(0,u.default)(h.ModelManager.mapModel(e),{id:e.id._serialized?e.id._serialized:e.id})}}]),ChatStateManager}(h.ModelManager),g=t.ChatStateCollectionManager=function(e){function ChatStateCollectionManager(){return(0,c.default)(this,ChatStateCollectionManager),(0,p.default)(this,(ChatStateCollectionManager.__proto__||(0,l.default)(ChatStateCollectionManager)).apply(this,arguments))}return(0,f.default)(ChatStateCollectionManager,e),(0,s.default)(ChatStateCollectionManager,null,[{key:"getModelManagerClass",value:function getModelManagerClass(){return m}}]),ChatStateCollectionManager}(h.CollectionManager),v=t.PresenceManager=(function _applyDecoratedDescriptor(e,t,r,n,a){var o={};return Object.keys(n).forEach(function(e){o[e]=n[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},o),a&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(a):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}((n=function(e){function PresenceManager(e){(0,c.default)(this,PresenceManager);var t=(0,p.default)(this,(PresenceManager.__proto__||(0,l.default)(PresenceManager)).call(this,e));return t.addSubmanager("chatStates",new g(t.model.chatstates)),t.addSubmanager("chatState",new m(t.model.chatstate)),t}return(0,f.default)(PresenceManager,e),(0,s.default)(PresenceManager,null,[{key:"mapModel",value:function mapModel(e){return(0,u.default)(h.ModelManager.mapModel(e),{id:e.id._serialized,chatActive:e.chatActive,forceDisplay:!1,hasData:!1,isOnline:!1,isSubscribed:!1,chatstate:e.isUser?m.mapModel(e.chatstate):null,chatstates:e.isGroup?e.chatstates.map(function(e){return m.mapModel(e)}):null})}}]),(0,s.default)(PresenceManager,[{key:"subscribe",value:function(){var e=(0,i.default)(o.default.mark(function _callee(){return o.default.wrap(function _callee$(e){for(;;)switch(e.prev=e.next){case 0:return manager.getSubmanager("wap").model.subscribePresence(this.model.id),e.t0=this.constructor,e.next=4,this.model.subscribe();case 4:return e.t1=e.sent,e.abrupt("return",e.t0.mapModel.call(e.t0,e.t1));case 6:case"end":return e.stop()}},_callee,this)}));return function subscribe(){return e.apply(this,arguments)}}()}]),PresenceManager}(h.ModelManager)).prototype,"subscribe",[d.command],(0,a.default)(n.prototype,"subscribe"),n.prototype),n);t.PresenceCollectionManager=function(e){function PresenceCollectionManager(){return(0,c.default)(this,PresenceCollectionManager),(0,p.default)(this,(PresenceCollectionManager.__proto__||(0,l.default)(PresenceCollectionManager)).apply(this,arguments))}return(0,f.default)(PresenceCollectionManager,e),(0,s.default)(PresenceCollectionManager,null,[{key:"getModelManagerClass",value:function getModelManagerClass(){return v}}]),PresenceCollectionManager}(h.CollectionManager)},function(e,t,r){"use strict";var n=_interopRequireDefault(r(5)),a=_interopRequireDefault(r(133));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}window.manager=new n.default,(0,a.default)(window.manager)},function(e,t,r){r(81),e.exports=r(9).Object.getPrototypeOf},function(e,t,r){var n=r(35),a=r(53);r(54)("getPrototypeOf",function(){return function getPrototypeOf(e){return a(n(e))}})},function(e,t,r){e.exports={default:r(83),__esModule:!0}},function(e,t,r){r(56),r(63),e.exports=r(45).f("iterator")},function(e,t,r){var n=r(42),a=r(36);e.exports=function(e){return function(t,r){var o,i,u=String(a(t)),l=n(r),c=u.length;return l<0||l>=c?e?"":void 0:(o=u.charCodeAt(l))<55296||o>56319||l+1===c||(i=u.charCodeAt(l+1))<56320||i>57343?e?u.charAt(l):o:e?u.slice(l,l+2):i-56320+(o-55296<<10)+65536}}},function(e,t,r){"use strict";var n=r(43),a=r(31),o=r(32),i={};r(21)(i,r(12)("iterator"),function(){return this}),e.exports=function(e,t,r){e.prototype=n(i,{next:a(1,r)}),o(e,t+" Iterator")}},function(e,t,r){var n=r(16),a=r(15),o=r(26);e.exports=r(18)?Object.defineProperties:function defineProperties(e,t){a(e);for(var r,i=o(t),u=i.length,l=0;u>l;)n.f(e,r=i[l++],t[r]);return e}},function(e,t,r){var n=r(19),a=r(61),o=r(88);e.exports=function(e){return function(t,r,i){var u,l=n(t),c=a(l.length),s=o(i,c);if(e&&r!=r){for(;c>s;)if((u=l[s++])!=u)return!0}else for(;c>s;s++)if((e||s in l)&&l[s]===r)return e||s||0;return!e&&-1}}},function(e,t,r){var n=r(42),a=Math.max,o=Math.min;e.exports=function(e,t){return(e=n(e))<0?a(e+t,0):o(e,t)}},function(e,t,r){"use strict";var n=r(90),a=r(91),o=r(25),i=r(19);e.exports=r(57)(Array,"Array",function(e,t){this._t=i(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,a(1)):a(0,"keys"==t?r:"values"==t?e[r]:[r,e[r]])},"values"),o.Arguments=o.Array,n("keys"),n("values"),n("entries")},function(e,t){e.exports=function(){}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,r){e.exports={default:r(93),__esModule:!0}},function(e,t,r){r(94),r(65),r(99),r(100),e.exports=r(9).Symbol},function(e,t,r){"use strict";var n=r(11),a=r(20),o=r(18),i=r(14),u=r(58),l=r(95).KEY,c=r(22),s=r(38),p=r(32),f=r(29),d=r(12),h=r(45),m=r(46),g=r(96),v=r(97),y=r(15),_=r(17),M=r(19),b=r(40),k=r(31),w=r(43),D=r(98),C=r(48),x=r(16),S=r(26),P=C.f,R=x.f,I=D.f,q=n.Symbol,O=n.JSON,L=O&&O.stringify,E=d("_hidden"),j=d("toPrimitive"),F={}.propertyIsEnumerable,A=s("symbol-registry"),z=s("symbols"),G=s("op-symbols"),$=Object.prototype,N="function"==typeof q,T=n.QObject,B=!T||!T.prototype||!T.prototype.findChild,V=o&&c(function(){return 7!=w(R({},"a",{get:function(){return R(this,"a",{value:7}).a}})).a})?function(e,t,r){var n=P($,t);n&&delete $[t],R(e,t,r),n&&e!==$&&R($,t,n)}:R,W=function(e){var t=z[e]=w(q.prototype);return t._k=e,t},U=N&&"symbol"==typeof q.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof q},H=function defineProperty(e,t,r){return e===$&&H(G,t,r),y(e),t=b(t,!0),y(r),a(z,t)?(r.enumerable?(a(e,E)&&e[E][t]&&(e[E][t]=!1),r=w(r,{enumerable:k(0,!1)})):(a(e,E)||R(e,E,k(1,{})),e[E][t]=!0),V(e,t,r)):R(e,t,r)},J=function defineProperties(e,t){y(e);for(var r,n=g(t=M(t)),a=0,o=n.length;o>a;)H(e,r=n[a++],t[r]);return e},K=function propertyIsEnumerable(e){var t=F.call(this,e=b(e,!0));return!(this===$&&a(z,e)&&!a(G,e))&&(!(t||!a(this,e)||!a(z,e)||a(this,E)&&this[E][e])||t)},Q=function getOwnPropertyDescriptor(e,t){if(e=M(e),t=b(t,!0),e!==$||!a(z,t)||a(G,t)){var r=P(e,t);return!r||!a(z,t)||a(e,E)&&e[E][t]||(r.enumerable=!0),r}},Y=function getOwnPropertyNames(e){for(var t,r=I(M(e)),n=[],o=0;r.length>o;)a(z,t=r[o++])||t==E||t==l||n.push(t);return n},X=function getOwnPropertySymbols(e){for(var t,r=e===$,n=I(r?G:M(e)),o=[],i=0;n.length>i;)!a(z,t=n[i++])||r&&!a($,t)||o.push(z[t]);return o};N||(u((q=function Symbol(){if(this instanceof q)throw TypeError("Symbol is not a constructor!");var e=f(arguments.length>0?arguments[0]:void 0),t=function(r){this===$&&t.call(G,r),a(this,E)&&a(this[E],e)&&(this[E][e]=!1),V(this,e,k(1,r))};return o&&B&&V($,e,{configurable:!0,set:t}),W(e)}).prototype,"toString",function toString(){return this._k}),C.f=Q,x.f=H,r(64).f=D.f=Y,r(28).f=K,r(47).f=X,o&&!r(23)&&u($,"propertyIsEnumerable",K,!0),h.f=function(e){return W(d(e))}),i(i.G+i.W+i.F*!N,{Symbol:q});for(var Z="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ee=0;Z.length>ee;)d(Z[ee++]);for(var te=S(d.store),re=0;te.length>re;)m(te[re++]);i(i.S+i.F*!N,"Symbol",{for:function(e){return a(A,e+="")?A[e]:A[e]=q(e)},keyFor:function keyFor(e){if(!U(e))throw TypeError(e+" is not a symbol!");for(var t in A)if(A[t]===e)return t},useSetter:function(){B=!0},useSimple:function(){B=!1}}),i(i.S+i.F*!N,"Object",{create:function create(e,t){return void 0===t?w(e):J(w(e),t)},defineProperty:H,defineProperties:J,getOwnPropertyDescriptor:Q,getOwnPropertyNames:Y,getOwnPropertySymbols:X}),O&&i(i.S+i.F*(!N||c(function(){var e=q();return"[null]"!=L([e])||"{}"!=L({a:e})||"{}"!=L(Object(e))})),"JSON",{stringify:function stringify(e){for(var t,r,n=[e],a=1;arguments.length>a;)n.push(arguments[a++]);if(r=t=n[1],(_(t)||void 0!==e)&&!U(e))return v(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!U(t))return t}),n[1]=t,L.apply(O,n)}}),q.prototype[j]||r(21)(q.prototype,j,q.prototype.valueOf),p(q,"Symbol"),p(Math,"Math",!0),p(n.JSON,"JSON",!0)},function(e,t,r){var n=r(29)("meta"),a=r(17),o=r(20),i=r(16).f,u=0,l=Object.isExtensible||function(){return!0},c=!r(22)(function(){return l(Object.preventExtensions({}))}),s=function(e){i(e,n,{value:{i:"O"+ ++u,w:{}}})},p=e.exports={KEY:n,NEED:!1,fastKey:function(e,t){if(!a(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,n)){if(!l(e))return"F";if(!t)return"E";s(e)}return e[n].i},getWeak:function(e,t){if(!o(e,n)){if(!l(e))return!0;if(!t)return!1;s(e)}return e[n].w},onFreeze:function(e){return c&&p.NEED&&l(e)&&!o(e,n)&&s(e),e}}},function(e,t,r){var n=r(26),a=r(47),o=r(28);e.exports=function(e){var t=n(e),r=a.f;if(r)for(var i,u=r(e),l=o.f,c=0;u.length>c;)l.call(e,i=u[c++])&&t.push(i);return t}},function(e,t,r){var n=r(27);e.exports=Array.isArray||function isArray(e){return"Array"==n(e)}},function(e,t,r){var n=r(19),a=r(64).f,o={}.toString,i="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function getOwnPropertyNames(e){return i&&"[object Window]"==o.call(e)?function(e){try{return a(e)}catch(e){return i.slice()}}(e):a(n(e))}},function(e,t,r){r(46)("asyncIterator")},function(e,t,r){r(46)("observable")},function(e,t,r){r(102);var n=r(9).Object;e.exports=function getOwnPropertyDescriptor(e,t){return n.getOwnPropertyDescriptor(e,t)}},function(e,t,r){var n=r(19),a=r(48).f;r(54)("getOwnPropertyDescriptor",function(){return function getOwnPropertyDescriptor(e,t){return a(n(e),t)}})},function(e,t,r){e.exports={default:r(104),__esModule:!0}},function(e,t,r){r(105),e.exports=r(9).Object.setPrototypeOf},function(e,t,r){var n=r(14);n(n.S,"Object",{setPrototypeOf:r(106).set})},function(e,t,r){var n=r(17),a=r(15),o=function(e,t){if(a(e),!n(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,n){try{(n=r(24)(Function.call,r(48).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function setPrototypeOf(e,r){return o(e,r),t?e.__proto__=r:n(e,r),e}}({},!1):void 0),check:o}},function(e,t,r){e.exports={default:r(108),__esModule:!0}},function(e,t,r){r(109);var n=r(9).Object;e.exports=function create(e,t){return n.create(e,t)}},function(e,t,r){var n=r(14);n(n.S,"Object",{create:r(43)})},function(e,t,r){r(111),e.exports=r(9).Object.assign},function(e,t,r){var n=r(14);n(n.S+n.F,"Object",{assign:r(112)})},function(e,t,r){"use strict";var n=r(26),a=r(47),o=r(28),i=r(35),u=r(60),l=Object.assign;e.exports=!l||r(22)(function(){var e={},t={},r=Symbol(),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach(function(e){t[e]=e}),7!=l({},e)[r]||Object.keys(l({},t)).join("")!=n})?function assign(e,t){for(var r=i(e),l=arguments.length,c=1,s=a.f,p=o.f;l>c;)for(var f,d=u(arguments[c++]),h=s?n(d).concat(s(d)):n(d),m=h.length,g=0;m>g;)p.call(d,f=h[g++])&&(r[f]=d[f]);return r}:l},function(e,t,r){var n=function(){return this}()||Function("return this")(),a=n.regeneratorRuntime&&Object.getOwnPropertyNames(n).indexOf("regeneratorRuntime")>=0,o=a&&n.regeneratorRuntime;if(n.regeneratorRuntime=void 0,e.exports=r(114),a)n.regeneratorRuntime=o;else try{delete n.regeneratorRuntime}catch(e){n.regeneratorRuntime=void 0}},function(e,t){!function(t){"use strict";var r,n=Object.prototype,a=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",u=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag",c="object"==typeof e,s=t.regeneratorRuntime;if(s)c&&(e.exports=s);else{(s=t.regeneratorRuntime=c?e.exports:{}).wrap=wrap;var p="suspendedStart",f="suspendedYield",d="executing",h="completed",m={},g={};g[i]=function(){return this};var v=Object.getPrototypeOf,y=v&&v(v(values([])));y&&y!==n&&a.call(y,i)&&(g=y);var _=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(g);GeneratorFunction.prototype=_.constructor=GeneratorFunctionPrototype,GeneratorFunctionPrototype.constructor=GeneratorFunction,GeneratorFunctionPrototype[l]=GeneratorFunction.displayName="GeneratorFunction",s.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===GeneratorFunction||"GeneratorFunction"===(t.displayName||t.name))},s.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,GeneratorFunctionPrototype):(e.__proto__=GeneratorFunctionPrototype,l in e||(e[l]="GeneratorFunction")),e.prototype=Object.create(_),e},s.awrap=function(e){return{__await:e}},defineIteratorMethods(AsyncIterator.prototype),AsyncIterator.prototype[u]=function(){return this},s.AsyncIterator=AsyncIterator,s.async=function(e,t,r,n){var a=new AsyncIterator(wrap(e,t,r,n));return s.isGeneratorFunction(t)?a:a.next().then(function(e){return e.done?e.value:a.next()})},defineIteratorMethods(_),_[l]="Generator",_[i]=function(){return this},_.toString=function(){return"[object Generator]"},s.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function next(){for(;t.length;){var r=t.pop();if(r in e)return next.value=r,next.done=!1,next}return next.done=!0,next}},s.values=values,Context.prototype={constructor:Context,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(resetTryEntry),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=r)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function handle(n,a){return i.type="throw",i.arg=e,t.next=n,a&&(t.method="next",t.arg=r),!!a}for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],i=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var u=a.call(o,"catchLoc"),l=a.call(o,"finallyLoc");if(u&&l){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;resetTryEntry(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:values(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=r),m}}}function wrap(e,t,r,n){var a=t&&t.prototype instanceof Generator?t:Generator,o=Object.create(a.prototype),i=new Context(n||[]);return o._invoke=function makeInvokeMethod(e,t,r){var n=p;return function invoke(a,o){if(n===d)throw new Error("Generator is already running");if(n===h){if("throw"===a)throw o;return doneResult()}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var u=maybeInvokeDelegate(i,r);if(u){if(u===m)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===p)throw n=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=d;var l=tryCatch(e,t,r);if("normal"===l.type){if(n=r.done?h:f,l.arg===m)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n=h,r.method="throw",r.arg=l.arg)}}}(e,r,i),o}function tryCatch(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}function defineIteratorMethods(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function AsyncIterator(e){var t;this._invoke=function enqueue(r,n){function callInvokeWithMethodAndArg(){return new Promise(function(t,o){!function invoke(t,r,n,o){var i=tryCatch(e[t],e,r);if("throw"!==i.type){var u=i.arg,l=u.value;return l&&"object"==typeof l&&a.call(l,"__await")?Promise.resolve(l.__await).then(function(e){invoke("next",e,n,o)},function(e){invoke("throw",e,n,o)}):Promise.resolve(l).then(function(e){u.value=e,n(u)},o)}o(i.arg)}(r,n,t,o)})}return t=t?t.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(e,t){var n=e.iterator[t.method];if(n===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=r,maybeInvokeDelegate(e,t),"throw"===t.method))return m;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var a=tryCatch(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,m;var o=a.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=r),t.delegate=null,m):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,m)}function pushTryEntry(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function resetTryEntry(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function Context(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(pushTryEntry,this),this.reset(!0)}function values(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function next(){for(;++n<e.length;)if(a.call(e,n))return next.value=e[n],next.done=!1,next;return next.value=r,next.done=!0,next};return o.next=o}}return{next:doneResult}}function doneResult(){return{value:r,done:!0}}}(function(){return this}()||Function("return this")())},function(e,t,r){r(65),r(56),r(63),r(116),r(128),r(129),e.exports=r(9).Promise},function(e,t,r){"use strict";var n,a,o,i,u=r(23),l=r(11),c=r(24),s=r(67),p=r(14),f=r(17),d=r(30),h=r(117),m=r(118),g=r(68),v=r(69).set,y=r(123)(),_=r(50),M=r(70),b=r(124),k=r(71),w=l.TypeError,D=l.process,C=D&&D.versions,x=C&&C.v8||"",S=l.Promise,P="process"==s(D),R=function(){},I=a=_.f,q=!!function(){try{var e=S.resolve(1),t=(e.constructor={})[r(12)("species")]=function(e){e(R,R)};return(P||"function"==typeof PromiseRejectionEvent)&&e.then(R)instanceof t&&0!==x.indexOf("6.6")&&-1===b.indexOf("Chrome/66")}catch(e){}}(),O=function(e){var t;return!(!f(e)||"function"!=typeof(t=e.then))&&t},L=function(e,t){if(!e._n){e._n=!0;var r=e._c;y(function(){for(var n=e._v,a=1==e._s,o=0,i=function(t){var r,o,i,u=a?t.ok:t.fail,l=t.resolve,c=t.reject,s=t.domain;try{u?(a||(2==e._h&&F(e),e._h=1),!0===u?r=n:(s&&s.enter(),r=u(n),s&&(s.exit(),i=!0)),r===t.promise?c(w("Promise-chain cycle")):(o=O(r))?o.call(r,l,c):l(r)):c(n)}catch(e){s&&!i&&s.exit(),c(e)}};r.length>o;)i(r[o++]);e._c=[],e._n=!1,t&&!e._h&&E(e)})}},E=function(e){v.call(l,function(){var t,r,n,a=e._v,o=j(e);if(o&&(t=M(function(){P?D.emit("unhandledRejection",a,e):(r=l.onunhandledrejection)?r({promise:e,reason:a}):(n=l.console)&&n.error&&n.error("Unhandled promise rejection",a)}),e._h=P||j(e)?2:1),e._a=void 0,o&&t.e)throw t.v})},j=function(e){return 1!==e._h&&0===(e._a||e._c).length},F=function(e){v.call(l,function(){var t;P?D.emit("rejectionHandled",e):(t=l.onrejectionhandled)&&t({promise:e,reason:e._v})})},A=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),L(t,!0))},z=function(e){var t,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===e)throw w("Promise can't be resolved itself");(t=O(e))?y(function(){var n={_w:r,_d:!1};try{t.call(e,c(z,n,1),c(A,n,1))}catch(e){A.call(n,e)}}):(r._v=e,r._s=1,L(r,!1))}catch(e){A.call({_w:r,_d:!1},e)}}};q||(S=function Promise(e){h(this,S,"Promise","_h"),d(e),n.call(this);try{e(c(z,this,1),c(A,this,1))}catch(e){A.call(this,e)}},(n=function Promise(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=r(125)(S.prototype,{then:function then(e,t){var r=I(g(this,S));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=P?D.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&L(this,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new n;this.promise=e,this.resolve=c(z,e,1),this.reject=c(A,e,1)},_.f=I=function(e){return e===S||e===i?new o(e):a(e)}),p(p.G+p.W+p.F*!q,{Promise:S}),r(32)(S,"Promise"),r(126)("Promise"),i=r(9).Promise,p(p.S+p.F*!q,"Promise",{reject:function reject(e){var t=I(this);return(0,t.reject)(e),t.promise}}),p(p.S+p.F*(u||!q),"Promise",{resolve:function resolve(e){return k(u&&this===i?S:this,e)}}),p(p.S+p.F*!(q&&r(127)(function(e){S.all(e).catch(R)})),"Promise",{all:function all(e){var t=this,r=I(t),n=r.resolve,a=r.reject,o=M(function(){var r=[],o=0,i=1;m(e,!1,function(e){var u=o++,l=!1;r.push(void 0),i++,t.resolve(e).then(function(e){l||(l=!0,r[u]=e,--i||n(r))},a)}),--i||n(r)});return o.e&&a(o.v),r.promise},race:function race(e){var t=this,r=I(t),n=r.reject,a=M(function(){m(e,!1,function(e){t.resolve(e).then(r.resolve,n)})});return a.e&&n(a.v),r.promise}})},function(e,t){e.exports=function(e,t,r,n){if(!(e instanceof t)||void 0!==n&&n in e)throw TypeError(r+": incorrect invocation!");return e}},function(e,t,r){var n=r(24),a=r(119),o=r(120),i=r(15),u=r(61),l=r(121),c={},s={};(t=e.exports=function(e,t,r,p,f){var d,h,m,g,v=f?function(){return e}:l(e),y=n(r,p,t?2:1),_=0;if("function"!=typeof v)throw TypeError(e+" is not iterable!");if(o(v)){for(d=u(e.length);d>_;_++)if((g=t?y(i(h=e[_])[0],h[1]):y(e[_]))===c||g===s)return g}else for(m=v.call(e);!(h=m.next()).done;)if((g=a(m,y,h.value,t))===c||g===s)return g}).BREAK=c,t.RETURN=s},function(e,t,r){var n=r(15);e.exports=function(e,t,r,a){try{return a?t(n(r)[0],r[1]):t(r)}catch(t){var o=e.return;throw void 0!==o&&n(o.call(e)),t}}},function(e,t,r){var n=r(25),a=r(12)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(n.Array===e||o[a]===e)}},function(e,t,r){var n=r(67),a=r(12)("iterator"),o=r(25);e.exports=r(9).getIteratorMethod=function(e){if(null!=e)return e[a]||e["@@iterator"]||o[n(e)]}},function(e,t){e.exports=function(e,t,r){var n=void 0===r;switch(t.length){case 0:return n?e():e.call(r);case 1:return n?e(t[0]):e.call(r,t[0]);case 2:return n?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)}},function(e,t,r){var n=r(11),a=r(69).set,o=n.MutationObserver||n.WebKitMutationObserver,i=n.process,u=n.Promise,l="process"==r(27)(i);e.exports=function(){var e,t,r,c=function(){var n,a;for(l&&(n=i.domain)&&n.exit();e;){a=e.fn,e=e.next;try{a()}catch(n){throw e?r():t=void 0,n}}t=void 0,n&&n.enter()};if(l)r=function(){i.nextTick(c)};else if(!o||n.navigator&&n.navigator.standalone)if(u&&u.resolve){var s=u.resolve(void 0);r=function(){s.then(c)}}else r=function(){a.call(n,c)};else{var p=!0,f=document.createTextNode("");new o(c).observe(f,{characterData:!0}),r=function(){f.data=p=!p}}return function(n){var a={fn:n,next:void 0};t&&(t.next=a),e||(e=a,r()),t=a}}},function(e,t,r){var n=r(11).navigator;e.exports=n&&n.userAgent||""},function(e,t,r){var n=r(21);e.exports=function(e,t,r){for(var a in t)r&&e[a]?e[a]=t[a]:n(e,a,t[a]);return e}},function(e,t,r){"use strict";var n=r(11),a=r(9),o=r(16),i=r(18),u=r(12)("species");e.exports=function(e){var t="function"==typeof a[e]?a[e]:n[e];i&&t&&!t[u]&&o.f(t,u,{configurable:!0,get:function(){return this}})}},function(e,t,r){var n=r(12)("iterator"),a=!1;try{var o=[7][n]();o.return=function(){a=!0},Array.from(o,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!a)return!1;var r=!1;try{var o=[7],i=o[n]();i.next=function(){return{done:r=!0}},o[n]=function(){return i},e(o)}catch(e){}return r}},function(e,t,r){"use strict";var n=r(14),a=r(9),o=r(11),i=r(68),u=r(71);n(n.P+n.R,"Promise",{finally:function(e){var t=i(this,a.Promise||o.Promise),r="function"==typeof e;return this.then(r?function(r){return u(t,e()).then(function(){return r})}:e,r?function(r){return u(t,e()).then(function(){throw r})}:e)}})},function(e,t,r){"use strict";var n=r(14),a=r(50),o=r(70);n(n.S,"Promise",{try:function(e){var t=a.f(this),r=o(e);return(r.e?t.reject:t.resolve)(r.v),t.promise}})},function(e,t,r){e.exports={default:r(131),__esModule:!0}},function(e,t,r){r(132);var n=r(9).Object;e.exports=function defineProperty(e,t,r){return n.defineProperty(e,t,r)}},function(e,t,r){var n=r(14);n(n.S+n.F*!r(18),"Object",{defineProperty:r(16).f})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=_interopRequireDefault(r(134)),a=_interopRequireDefault(r(41));t.default=function createManagers(e){function discoveryModules(t){var r=function getArtifactsDefs(){return{conn:function conn(e){return e.default&&"object"==(0,a.default)(e.default)&&"ref"in e.default&&"refTTL"in e.default?e.default:null},store:function store(e){return e.Chat&&e.Msg?e:null},wap:function wap(e){return e.queryExist?e:e.default&&e.default.queryExist?e.default:null},stream:function stream(e){return e.default&&"object"==(0,a.default)(e.default)&&"stream"in e.default&&"socket"in e.default?e.default:null},uiController:function uiController(e){return e.default&&e.default.focusNextChat?e.default:null},mediaCollectionClass:function mediaCollectionClass(e){return e.prototype&&void 0!==e.prototype.processFiles||e.default&&e.default.prototype&&void 0!==e.default.prototype.processFiles?e.default?e.default:e:null},createPeerForContact:function createPeerForContact(e){return e.default&&e.default.prototype&&e.default.prototype.isServer&&e.default.prototype.isUser?e.default:null},displayInfo:function displayInfo(e){return e.default&&e.default.markAvailable&&e.default.unobscure?e.default:null}}}(),k=function getRequirementsDefs(){return{connManager:{requirements:["conn"],build:function build(e,t){var r=new i.ConnManager(t.conn);return e.addSubmanager("conn",r),r}},chatManager:{requirements:["store","mediaCollectionClass","createPeerForContact","displayInfo"],build:function build(e,t){var r=new o.ChatCollectionManager(t.store.Chat,t.mediaCollectionClass,t.createPeerForContact,t.displayInfo);return e.addSubmanager("chats",r),r}},messageManager:{requirements:["store"],build:function build(e,t){var r=new p.MessageCollectionManager(t.store.Msg);return e.addSubmanager("messages",r),r}},messageInfoManager:{requirements:["store"],build:function build(e,t){var r=new f.MessageInfoCollectionManager(t.store.MsgInfo);return e.addSubmanager("messageInfos",r),r}},contactManager:{requirements:["store"],build:function build(e,t){var r=new u.ContactCollectionManager(t.store.Contact);return e.addSubmanager("contacts",r),r}},groupMetadataManager:{requirements:["store"],build:function build(e,t){var r=new c.GroupMetadataCollectionManager(t.store.GroupMetadata);return e.addSubmanager("groupMetadata",r),r}},wapManager:{requirements:["wap"],build:function build(e,t){var r=new b.WapManager(t.wap);return e.addSubmanager("wap",r),r}},streamManager:{requirements:["stream"],build:function build(e,t){var r=new _.StreamManager(t.stream);return e.addSubmanager("stream",r),r}},uiControllerManager:{requirements:["uiController"],build:function build(e,t){var r=new M.UIControllerManager(t.uiController);return e.addSubmanager("uiController",r),r}},storageManager:{build:function build(e){var t=new y.StorageManager;return e.addSubmanager("storage",t),t}},stickerManager:{requirements:["store"],build:function build(e,t){var r=new v.StickerPackCollectionManager(t.store.StickerPack);return e.addSubmanager("stickerPacks",r),r}},presenceManager:{requirements:["store"],build:function build(e,t){var r=new h.PresenceCollectionManager(t.store.Presence);return e.addSubmanager("presences",r),r}},profilePicThumbManager:{requirements:["store"],build:function build(e,t){var r=new m.ProfilePicThumbCollectionManager(t.store.ProfilePicThumb);return e.addSubmanager("profilePicThumbs",r),r}},statusManager:{requirements:["store"],build:function build(e,t){var r=new g.StatusCollectionManager(t.store.Status);return e.addSubmanager("status",r),r}},displayInfoManager:{requirements:["displayInfo"],build:function build(e,t){var r=new l.DisplayInfoManager(t.displayInfo);return e.addSubmanager("displayInfo",r),r}},liveLocationManager:{requirements:["store"],build:function build(e,t){var r=new s.LiveLocationCollectionManager(t.store.LiveLocation);return e.addSubmanager("liveLocations",r),r}},muteManager:{requirements:["store"],build:function build(e,t){var r=new d.MuteCollectionManager(t.store.Mute);return e.addSubmanager("mutes",r),r}}}}(),w={};function checkRequirements(){for(var t=!0;t;)for(var r in t=!1,k){var n=k[r],a=!0;(n.requirements||[]).forEach(function(e){e in w||(a=!1)}),a&&(w[r]=n.build(e,w),delete k[r],t=!0,console.log("Built requirement: "+r))}}function checkArtifacts(e){for(var t in r){var n=r[t](e);if(n)return w[t]=n,console.log("Got artifact: "+t),!0}}for(var D in t)if("object"===(0,a.default)(t[D])&&t[D]){var C=(0,n.default)(t[D])[0];if("object"===(void 0===C?"undefined":(0,a.default)(C))&&C.exports)for(var x in t[D]){var S=t(x);if(S&&(checkArtifacts(S)&&checkRequirements(),0==r.length||0==k.length))return}}}webpackJsonp([],{whalesong:function whalesong(e,t,r){return discoveryModules(r)}},"whalesong")};var o=r(72),i=r(139),u=r(34),l=r(140),c=r(75),s=r(76),p=r(52),f=r(141),d=r(77),h=r(78),m=r(73),g=r(74),v=r(142),y=r(143),_=r(144),M=r(145),b=r(146);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}},function(e,t,r){e.exports={default:r(135),__esModule:!0}},function(e,t,r){r(136),e.exports=r(9).Object.values},function(e,t,r){var n=r(14),a=r(137)(!1);n(n.S,"Object",{values:function values(e){return a(e)}})},function(e,t,r){var n=r(26),a=r(19),o=r(28).f;e.exports=function(e){return function(t){for(var r,i=a(t),u=n(i),l=u.length,c=0,s=[];l>c;)o.call(i,r=u[c++])&&s.push(e?[r,i[r]]:i[r]);return s}}},function(e,t,r){var n,a,o;a=[],void 0===(o="function"==typeof(n=function(){"use strict";return function b64toBlob(e,t,r){t=t||"",r=r||512;for(var n=atob(e),a=[],o=0;o<n.length;o+=r){for(var i=n.slice(o,o+r),u=new Array(i.length),l=0;l<i.length;l++)u[l]=i.charCodeAt(l);var c=new Uint8Array(u);a.push(c)}var s=new Blob(a,{type:t});return s}})?n.apply(t,a):n)||(e.exports=o)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnManager=void 0;var n,a=_interopRequireDefault(r(4)),o=_interopRequireDefault(r(6)),i=_interopRequireDefault(r(7)),u=_interopRequireDefault(r(0)),l=_interopRequireDefault(r(3)),c=_interopRequireDefault(r(8)),s=_interopRequireDefault(r(1)),p=_interopRequireDefault(r(2)),f=r(5),d=r(10);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _applyDecoratedDescriptor(e,t,r,n,a){var o={};return Object.keys(n).forEach(function(e){o[e]=n[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},o),a&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(a):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}t.ConnManager=(_applyDecoratedDescriptor((n=function(e){function ConnManager(){return(0,l.default)(this,ConnManager),(0,s.default)(this,(ConnManager.__proto__||(0,u.default)(ConnManager)).apply(this,arguments))}return(0,p.default)(ConnManager,e),(0,c.default)(ConnManager,[{key:"updatePushname",value:function(){var e=(0,i.default)(o.default.mark(function _callee(e){var t=e.name;return o.default.wrap(function _callee$(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.model.updatePushname(t);case 2:case"end":return e.stop()}},_callee,this)}));return function updatePushname(t){return e.apply(this,arguments)}}()},{key:"canSetMyPushname",value:function(){var e=(0,i.default)(o.default.mark(function _callee2(){return o.default.wrap(function _callee2$(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.model.canSetMyPushname();case 2:case"end":return e.stop()}},_callee2,this)}));return function canSetMyPushname(){return e.apply(this,arguments)}}()}]),ConnManager}(d.ModelManager)).prototype,"updatePushname",[f.command],(0,a.default)(n.prototype,"updatePushname"),n.prototype),_applyDecoratedDescriptor(n.prototype,"canSetMyPushname",[f.command],(0,a.default)(n.prototype,"canSetMyPushname"),n.prototype),n)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DisplayInfoManager=void 0;var n,a=_interopRequireDefault(r(4)),o=_interopRequireDefault(r(6)),i=_interopRequireDefault(r(7)),u=_interopRequireDefault(r(0)),l=_interopRequireDefault(r(3)),c=_interopRequireDefault(r(8)),s=_interopRequireDefault(r(1)),p=_interopRequireDefault(r(2)),f=r(10),d=r(5);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _applyDecoratedDescriptor(e,t,r,n,a){var o={};return Object.keys(n).forEach(function(e){o[e]=n[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},o),a&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(a):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}t.DisplayInfoManager=(_applyDecoratedDescriptor((n=function(e){function DisplayInfoManager(){return(0,l.default)(this,DisplayInfoManager),(0,s.default)(this,(DisplayInfoManager.__proto__||(0,u.default)(DisplayInfoManager)).apply(this,arguments))}return(0,p.default)(DisplayInfoManager,e),(0,c.default)(DisplayInfoManager,[{key:"markAvailable",value:function(){var e=(0,i.default)(o.default.mark(function _callee(){return o.default.wrap(function _callee$(e){for(;;)switch(e.prev=e.next){case 0:this.model.markAvailable();case 1:case"end":return e.stop()}},_callee,this)}));return function markAvailable(){return e.apply(this,arguments)}}()},{key:"markUnavailable",value:function(){var e=(0,i.default)(o.default.mark(function _callee2(){return o.default.wrap(function _callee2$(e){for(;;)switch(e.prev=e.next){case 0:this.model.markUnavailable();case 1:case"end":return e.stop()}},_callee2,this)}));return function markUnavailable(){return e.apply(this,arguments)}}()},{key:"unobscure",value:function(){var e=(0,i.default)(o.default.mark(function _callee3(){return o.default.wrap(function _callee3$(e){for(;;)switch(e.prev=e.next){case 0:this.model.unobscure();case 1:case"end":return e.stop()}},_callee3,this)}));return function unobscure(){return e.apply(this,arguments)}}()}],[{key:"mapModel",value:function mapModel(e){return{available:e.available,clientExpired:e.clientExpired,couldForce:e.couldForce,displayInfo:e.displayInfo,hardExpired:e.hardExpired,info:e.info,isState:e.isState,obscurity:e.obscurity,phoneAuthed:e.phoneAuthed,resumeCount:e.resumeCount,uiActive:e.uiActive,mode:e.mode}}}]),DisplayInfoManager}(f.ModelManager)).prototype,"markAvailable",[d.command],(0,a.default)(n.prototype,"markAvailable"),n.prototype),_applyDecoratedDescriptor(n.prototype,"markUnavailable",[d.command],(0,a.default)(n.prototype,"markUnavailable"),n.prototype),_applyDecoratedDescriptor(n.prototype,"unobscure",[d.command],(0,a.default)(n.prototype,"unobscure"),n.prototype),n)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MessageInfoCollectionManager=t.MessageInfoManager=t.MessageAckCollectionManager=t.MessageAckManager=void 0;var n,a=_interopRequireDefault(r(4)),o=_interopRequireDefault(r(6)),i=_interopRequireDefault(r(7)),u=_interopRequireDefault(r(13)),l=_interopRequireDefault(r(0)),c=_interopRequireDefault(r(3)),s=_interopRequireDefault(r(8)),p=_interopRequireDefault(r(1)),f=_interopRequireDefault(r(2)),d=r(5),h=r(10);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var m=t.MessageAckManager=function(e){function MessageAckManager(){return(0,c.default)(this,MessageAckManager),(0,p.default)(this,(MessageAckManager.__proto__||(0,l.default)(MessageAckManager)).apply(this,arguments))}return(0,f.default)(MessageAckManager,e),(0,s.default)(MessageAckManager,null,[{key:"mapModel",value:function mapModel(e){return(0,u.default)(h.ModelManager.mapModel(e),{id:e.id._serialized})}}]),MessageAckManager}(h.ModelManager),g=t.MessageAckCollectionManager=function(e){function MessageAckCollectionManager(){return(0,c.default)(this,MessageAckCollectionManager),(0,p.default)(this,(MessageAckCollectionManager.__proto__||(0,l.default)(MessageAckCollectionManager)).apply(this,arguments))}return(0,f.default)(MessageAckCollectionManager,e),(0,s.default)(MessageAckCollectionManager,null,[{key:"getModelManagerClass",value:function getModelManagerClass(){return m}}]),MessageAckCollectionManager}(h.CollectionManager),v=t.MessageInfoManager=function(e){function MessageInfoManager(e){(0,c.default)(this,MessageInfoManager);var t=(0,p.default)(this,(MessageInfoManager.__proto__||(0,l.default)(MessageInfoManager)).call(this,e));return t.addSubmanager("read",new g(t.model.read)),t.addSubmanager("delivery",new g(t.model.delivery)),t.addSubmanager("played",new g(t.model.played)),t}return(0,f.default)(MessageInfoManager,e),(0,s.default)(MessageInfoManager,null,[{key:"mapModel",value:function mapModel(e){return(0,u.default)(h.ModelManager.mapModel(e),{id:e.id._serialized,delivery:e.delivery.map(function(e){return m.mapModel(e)}),played:e.delivery.map(function(e){return m.mapModel(e)}),read:e.delivery.map(function(e){return m.mapModel(e)})})}}]),MessageInfoManager}(h.ModelManager);t.MessageInfoCollectionManager=(function _applyDecoratedDescriptor(e,t,r,n,a){var o={};return Object.keys(n).forEach(function(e){o[e]=n[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},o),a&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(a):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}((n=function(e){function MessageInfoCollectionManager(){return(0,c.default)(this,MessageInfoCollectionManager),(0,p.default)(this,(MessageInfoCollectionManager.__proto__||(0,l.default)(MessageInfoCollectionManager)).apply(this,arguments))}return(0,f.default)(MessageInfoCollectionManager,e),(0,s.default)(MessageInfoCollectionManager,[{key:"fetch",value:function(){var e=(0,i.default)(o.default.mark(function _callee(e){var t,r=e.message_id;return o.default.wrap(function _callee$(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,manager.getSubmanager("messages").loadItem(r);case 2:return t=e.sent,e.next=5,this.fetchByMessage(t.id);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},_callee,this)}));return function fetch(t){return e.apply(this,arguments)}}()},{key:"fetchByMessage",value:function(){var e=(0,i.default)(o.default.mark(function _callee2(e){return o.default.wrap(function _callee2$(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=v,t.next=3,this.collection.find(e.id);case 3:return t.t1=t.sent,t.abrupt("return",t.t0.mapModel.call(t.t0,t.t1));case 5:case"end":return t.stop()}},_callee2,this)}));return function fetchByMessage(t){return e.apply(this,arguments)}}()}],[{key:"getModelManagerClass",value:function getModelManagerClass(){return v}}]),MessageInfoCollectionManager}(h.CollectionManager)).prototype,"fetch",[d.command],(0,a.default)(n.prototype,"fetch"),n.prototype),n)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StickerPackCollectionManager=t.StickerPackManager=t.StickerCollectionManager=t.StickerManager=void 0;var n,a,o,i=_interopRequireDefault(r(4)),u=_interopRequireDefault(r(13)),l=_interopRequireDefault(r(6)),c=_interopRequireDefault(r(7)),s=_interopRequireDefault(r(0)),p=_interopRequireDefault(r(3)),f=_interopRequireDefault(r(8)),d=_interopRequireDefault(r(1)),h=_interopRequireDefault(r(2)),m=r(33),g=r(5),v=r(10),y=r(51);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _applyDecoratedDescriptor(e,t,r,n,a){var o={};return Object.keys(n).forEach(function(e){o[e]=n[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},o),a&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(a):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var _=t.StickerManager=(_applyDecoratedDescriptor((n=function(e){function StickerManager(){return(0,p.default)(this,StickerManager),(0,d.default)(this,(StickerManager.__proto__||(0,s.default)(StickerManager)).apply(this,arguments))}return(0,h.default)(StickerManager,e),(0,f.default)(StickerManager,[{key:"sendToChat",value:function(){var e=(0,c.default)(l.default.mark(function _callee(e){var t=this,r=e.chatId,n=e.quotedMsgId;return l.default.wrap(function _callee$(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.model.downloadMedia();case 3:manager.getSubmanager("chats").getSubmanager(r),e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(0),new y.ModelNotFound('Chat with ID "'+r+'" not found');case 9:return n&&(chatManager.model.composeQuotedMsg=chatManager.model.msgs.get(n)),e.next=12,chatManager._sendMessage(function(){return t.model.sendToChat(chatManager.model)},function(e){return"sticker"===e.type&&e.filehash===t.model.filehash});case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}},_callee,this,[[0,6]])}));return function sendToChat(t){return e.apply(this,arguments)}}()}],[{key:"mapModel",value:function mapModel(e){return(0,u.default)(v.ModelManager.mapModel(e),{_mediaObject:null})}}]),StickerManager}(v.ModelManager)).prototype,"sendToChat",[g.command],(0,i.default)(n.prototype,"sendToChat"),n.prototype),n),M=t.StickerCollectionManager=(_applyDecoratedDescriptor((a=function(e){function StickerCollectionManager(){return(0,p.default)(this,StickerCollectionManager),(0,d.default)(this,(StickerCollectionManager.__proto__||(0,s.default)(StickerCollectionManager)).apply(this,arguments))}return(0,h.default)(StickerCollectionManager,e),(0,f.default)(StickerCollectionManager,[{key:"fetch",value:function(){var e=(0,c.default)(l.default.mark(function _callee2(){return l.default.wrap(function _callee2$(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.collection.fetch();case 2:case"end":return e.stop()}},_callee2,this)}));return function fetch(){return e.apply(this,arguments)}}()}],[{key:"getModelManagerClass",value:function getModelManagerClass(){return _}}]),StickerCollectionManager}(v.CollectionManager)).prototype,"fetch",[g.command],(0,i.default)(a.prototype,"fetch"),a.prototype),a),b=t.StickerPackManager=function(e){function StickerPackManager(e){(0,p.default)(this,StickerPackManager);var t=(0,d.default)(this,(StickerPackManager.__proto__||(0,s.default)(StickerPackManager)).call(this,e));return t.addSubmanager("stickers",new M(t.model.stickers)),t}return(0,h.default)(StickerPackManager,e),StickerPackManager}(v.ModelManager);t.StickerPackCollectionManager=(_applyDecoratedDescriptor((o=function(e){function StickerPackCollectionManager(){return(0,p.default)(this,StickerPackCollectionManager),(0,d.default)(this,(StickerPackCollectionManager.__proto__||(0,s.default)(StickerPackCollectionManager)).apply(this,arguments))}return(0,h.default)(StickerPackCollectionManager,e),(0,f.default)(StickerPackCollectionManager,[{key:"fetchPage",value:function(){var e=(0,c.default)(l.default.mark(function _callee3(e){var t,r=e.page;return l.default.wrap(function _callee3$(e){for(;;)switch(e.prev=e.next){case 0:if(!((t=this.collection.pageWithIndex(r))<r)){e.next=3;break}throw new m.ValueError("Page "+r+" does not exist");case 3:if("SUCCESS"!==this.collection.pageFetchStates[t]){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,this.collection.fetchAt(r);case 7:return e.next=9,this.collection._pageFetchPromises[t];case 9:if(this.collection.pageFetchStates[t]){e.next=11;break}throw new m.ValueError("Page "+r+" does not exist");case 11:case"end":return e.stop()}},_callee3,this)}));return function fetchPage(t){return e.apply(this,arguments)}}()},{key:"fetchAllPages",value:function(){var e=(0,c.default)(l.default.mark(function _callee4(){var e;return l.default.wrap(function _callee4$(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,e=0;case 2:return t.next=5,this.fetchPage({page:e});case 5:e++,t.next=2;break;case 8:t.next=12;break;case 10:t.prev=10,t.t0=t.catch(0);case 12:case 13:case"end":return t.stop()}},_callee4,this,[[0,10]])}));return function fetchAllPages(){return e.apply(this,arguments)}}()},{key:"reset",value:function(){var e=(0,c.default)(l.default.mark(function _callee5(){return l.default.wrap(function _callee5$(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.collection.reset());case 1:case"end":return e.stop()}},_callee5,this)}));return function reset(){return e.apply(this,arguments)}}()},{key:"getItemByName",value:function(){var e=(0,c.default)(l.default.mark(function _callee6(e){var t,r=e.name;return l.default.wrap(function _callee6$(e){for(;;)switch(e.prev=e.next){case 0:if(0!==(t=this.collection.where({name:r})).length){e.next=3;break}throw new y.ModelNotFound('Sticker pack with name "'+r+'" not found');case 3:return e.abrupt("return",this.mapItem(t[0]));case 4:case"end":return e.stop()}},_callee6,this)}));return function getItemByName(t){return e.apply(this,arguments)}}()}],[{key:"getModelManagerClass",value:function getModelManagerClass(){return b}}]),StickerPackCollectionManager}(v.CollectionManager)).prototype,"fetchPage",[g.command],(0,i.default)(o.prototype,"fetchPage"),o.prototype),_applyDecoratedDescriptor(o.prototype,"fetchAllPages",[g.command],(0,i.default)(o.prototype,"fetchAllPages"),o.prototype),_applyDecoratedDescriptor(o.prototype,"reset",[g.command],(0,i.default)(o.prototype,"reset"),o.prototype),_applyDecoratedDescriptor(o.prototype,"getItemByName",[g.command],(0,i.default)(o.prototype,"getItemByName"),o.prototype),o)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StorageManager=t.StorageItemMonitor=t.StorageMonitor=void 0;var n,a=_interopRequireDefault(r(4)),o=_interopRequireDefault(r(6)),i=_interopRequireDefault(r(7)),u=_interopRequireDefault(r(0)),l=_interopRequireDefault(r(3)),c=_interopRequireDefault(r(8)),s=_interopRequireDefault(r(1)),p=_interopRequireDefault(r(2)),f=r(5);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _applyDecoratedDescriptor(e,t,r,n,a){var o={};return Object.keys(n).forEach(function(e){o[e]=n[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},o),a&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(a):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var d=t.StorageMonitor=function(e){function StorageMonitor(){return(0,l.default)(this,StorageMonitor),(0,s.default)(this,(StorageMonitor.__proto__||(0,u.default)(StorageMonitor)).apply(this,arguments))}return(0,p.default)(StorageMonitor,e),(0,c.default)(StorageMonitor,[{key:"mapEventResult",value:function mapEventResult(e){return{}}},{key:"_addHandler",value:function _addHandler(e){window.addEventListener("storageChange",e)}},{key:"_removeHandler",value:function _removeHandler(e){window.removeEventListener("storageChange",e)}}]),StorageMonitor}(f.Monitor),h=t.StorageItemMonitor=function(e){function StorageItemMonitor(){return(0,l.default)(this,StorageItemMonitor),(0,s.default)(this,(StorageItemMonitor.__proto__||(0,u.default)(StorageItemMonitor)).apply(this,arguments))}return(0,p.default)(StorageItemMonitor,e),(0,c.default)(StorageItemMonitor,[{key:"mapEventResult",value:function mapEventResult(e){return{key:e.detail.key,newValue:e.detail.newValue,oldValue:e.detail.oldValue}}},{key:"_addHandler",value:function _addHandler(e){window.addEventListener("storageSet",e),window.addEventListener("storageRemove",e)}},{key:"_removeHandler",value:function _removeHandler(e){window.removeEventListener("storageSet",e),window.removeEventListener("storageRemove",e)}}]),StorageItemMonitor}(f.Monitor);t.StorageManager=(_applyDecoratedDescriptor((n=function(e){function StorageManager(){return(0,l.default)(this,StorageManager),(0,s.default)(this,(StorageManager.__proto__||(0,u.default)(StorageManager)).apply(this,arguments))}return(0,p.default)(StorageManager,e),(0,c.default)(StorageManager,[{key:"initStorageEvents",value:function initStorageEvents(){if(!this._eventInitiated){var e=Storage.prototype.setItem,t=Storage.prototype.removeItem,r=Storage.prototype.clear;Storage.prototype.setItem=function(){window.dispatchEvent(new CustomEvent("storageSet",{detail:{key:arguments[0],newValue:arguments[1],oldValue:window.localStorage.getItem(arguments[0])}})),window.dispatchEvent(new Event("storageChange")),e.apply(this,arguments)},Storage.prototype.removeItem=function(){window.dispatchEvent(new CustomEvent("storageRemove",{detail:{key:arguments[0],oldValue:window.localStorage.getItem(arguments[0]),newValue:null}})),window.dispatchEvent(new Event("storageChange")),t.apply(this,arguments)},Storage.prototype.clear=function(){window.dispatchEvent(new Event("storageChange")),r.apply(this,arguments)},this._eventInitiated=!0}}},{key:"getStorage",value:function(){var e=(0,i.default)(o.default.mark(function _callee(){return o.default.wrap(function _callee$(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",window.localStorage);case 1:case"end":return e.stop()}},_callee,this)}));return function getStorage(){return e.apply(this,arguments)}}()},{key:"getItem",value:function(){var e=(0,i.default)(o.default.mark(function _callee2(e){var t=e.key;return o.default.wrap(function _callee2$(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",window.localStorage.get(t));case 1:case"end":return e.stop()}},_callee2,this)}));return function getItem(t){return e.apply(this,arguments)}}()},{key:"setItem",value:function(){var e=(0,i.default)(o.default.mark(function _callee3(e){var t=e.key,r=e.value;return o.default.wrap(function _callee3$(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",window.localStorage.set(t,r));case 1:case"end":return e.stop()}},_callee3,this)}));return function setItem(t){return e.apply(this,arguments)}}()},{key:"setStorage",value:function(){var e=(0,i.default)(o.default.mark(function _callee4(e){var t,r=e.data;return o.default.wrap(function _callee4$(e){for(;;)switch(e.prev=e.next){case 0:e.t0=o.default.keys(r);case 1:if((e.t1=e.t0()).done){e.next=7;break}return t=e.t1.value,e.next=5,this.setItem({key:t,value:r[t]});case 5:e.next=1;break;case 7:case"end":return e.stop()}},_callee4,this)}));return function setStorage(t){return e.apply(this,arguments)}}()},{key:"monitorStorage",value:function(){var e=(0,i.default)(o.default.mark(function _callee5(){return o.default.wrap(function _callee5$(e){for(;;)switch(e.prev=e.next){case 0:return this.initStorageEvents(),e.abrupt("return",new d);case 2:case"end":return e.stop()}},_callee5,this)}));return function monitorStorage(){return e.apply(this,arguments)}}()},{key:"monitorItemStorage",value:function(){var e=(0,i.default)(o.default.mark(function _callee6(){return o.default.wrap(function _callee6$(e){for(;;)switch(e.prev=e.next){case 0:return this.initStorageEvents(),e.abrupt("return",new h);case 2:case"end":return e.stop()}},_callee6,this)}));return function monitorItemStorage(){return e.apply(this,arguments)}}()}]),StorageManager}(f.CommandManager)).prototype,"getStorage",[f.command],(0,a.default)(n.prototype,"getStorage"),n.prototype),_applyDecoratedDescriptor(n.prototype,"getItem",[f.command],(0,a.default)(n.prototype,"getItem"),n.prototype),_applyDecoratedDescriptor(n.prototype,"setItem",[f.command],(0,a.default)(n.prototype,"setItem"),n.prototype),_applyDecoratedDescriptor(n.prototype,"setStorage",[f.command],(0,a.default)(n.prototype,"setStorage"),n.prototype),_applyDecoratedDescriptor(n.prototype,"monitorStorage",[f.monitor],(0,a.default)(n.prototype,"monitorStorage"),n.prototype),_applyDecoratedDescriptor(n.prototype,"monitorItemStorage",[f.monitor],(0,a.default)(n.prototype,"monitorItemStorage"),n.prototype),n)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StreamManager=void 0;var n,a=_interopRequireDefault(r(4)),o=_interopRequireDefault(r(6)),i=_interopRequireDefault(r(7)),u=_interopRequireDefault(r(0)),l=_interopRequireDefault(r(3)),c=_interopRequireDefault(r(8)),s=_interopRequireDefault(r(1)),p=_interopRequireDefault(r(2)),f=r(5),d=r(10);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _applyDecoratedDescriptor(e,t,r,n,a){var o={};return Object.keys(n).forEach(function(e){o[e]=n[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},o),a&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(a):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}t.StreamManager=(_applyDecoratedDescriptor((n=function(e){function StreamManager(){return(0,l.default)(this,StreamManager),(0,s.default)(this,(StreamManager.__proto__||(0,u.default)(StreamManager)).apply(this,arguments))}return(0,p.default)(StreamManager,e),(0,c.default)(StreamManager,[{key:"poke",value:function(){var e=(0,i.default)(o.default.mark(function _callee(){return o.default.wrap(function _callee$(e){for(;;)switch(e.prev=e.next){case 0:this.model.poke();case 1:case"end":return e.stop()}},_callee,this)}));return function poke(){return e.apply(this,arguments)}}()},{key:"takeover",value:function(){var e=(0,i.default)(o.default.mark(function _callee2(){return o.default.wrap(function _callee2$(e){for(;;)switch(e.prev=e.next){case 0:this.model.takeover();case 1:case"end":return e.stop()}},_callee2,this)}));return function takeover(){return e.apply(this,arguments)}}()}],[{key:"mapModel",value:function mapModel(e){return{backoffGeneration:e.backoffGeneration,canSend:e.canSend,hasSynced:e.hasSynced,isIncognito:e.isIncognito,launchGeneration:e.launchGeneration,launched:e.launched,retryTimestamp:e.retryTimestamp,state:e.state,stream:e.stream,syncTag:e.syncTag}}}]),StreamManager}(d.ModelManager)).prototype,"poke",[f.command],(0,a.default)(n.prototype,"poke"),n.prototype),_applyDecoratedDescriptor(n.prototype,"takeover",[f.command],(0,a.default)(n.prototype,"takeover"),n.prototype),n)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UIControllerManager=void 0;var n=_interopRequireDefault(r(0)),a=_interopRequireDefault(r(3)),o=_interopRequireDefault(r(1)),i=_interopRequireDefault(r(2)),u=r(10);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}t.UIControllerManager=function(e){function UIControllerManager(){return(0,a.default)(this,UIControllerManager),(0,o.default)(this,(UIControllerManager.__proto__||(0,n.default)(UIControllerManager)).apply(this,arguments))}return(0,i.default)(UIControllerManager,e),UIControllerManager}(u.ModelManager)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WapManager=void 0;var n,a=_interopRequireDefault(r(4)),o=_interopRequireDefault(r(6)),i=_interopRequireDefault(r(7)),u=_interopRequireDefault(r(0)),l=_interopRequireDefault(r(3)),c=_interopRequireDefault(r(8)),s=_interopRequireDefault(r(1)),p=_interopRequireDefault(r(2)),f=r(10),d=r(5);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _applyDecoratedDescriptor(e,t,r,n,a){var o={};return Object.keys(n).forEach(function(e){o[e]=n[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},o),a&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(a):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}t.WapManager=(_applyDecoratedDescriptor((n=function(e){function WapManager(){return(0,l.default)(this,WapManager),(0,s.default)(this,(WapManager.__proto__||(0,u.default)(WapManager)).apply(this,arguments))}return(0,p.default)(WapManager,e),(0,c.default)(WapManager,[{key:"queryExist",value:function(){var e=(0,i.default)(o.default.mark(function _callee(e){var t=e.contactId;return o.default.wrap(function _callee$(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.model.queryExist(t);case 2:if(200!==e.sent.status){e.next=5;break}return e.abrupt("return",!0);case 5:return e.abrupt("return",!1);case 6:case"end":return e.stop()}},_callee,this)}));return function queryExist(t){return e.apply(this,arguments)}}()},{key:"getCapabilities",value:function(){var e=(0,i.default)(o.default.mark(function _callee2(e){var t,r=e.contactId;return o.default.wrap(function _callee2$(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.model.getCapabilities([r]);case 2:return t=e.sent,e.abrupt("return",!!t[r]);case 4:case"end":return e.stop()}},_callee2,this)}));return function getCapabilities(t){return e.apply(this,arguments)}}()},{key:"queryLinkPreview",value:function(){var e=(0,i.default)(o.default.mark(function _callee3(e){var t,r=e.text;return o.default.wrap(function _callee3$(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.model.queryLinkPreview(r);case 2:if(!(t=e.sent).status||200===t.status){e.next=5;break}return e.abrupt("return");case 5:return e.abrupt("return",t);case 6:case"end":return e.stop()}},_callee3,this)}));return function queryLinkPreview(t){return e.apply(this,arguments)}}()},{key:"subscribePresence",value:function(){var e=(0,i.default)(o.default.mark(function _callee4(e){var t=e.id;return o.default.wrap(function _callee4$(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.model.subscribePresence(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},_callee4,this)}));return function subscribePresence(t){return e.apply(this,arguments)}}()}]),WapManager}(f.ModelManager)).prototype,"queryExist",[d.command],(0,a.default)(n.prototype,"queryExist"),n.prototype),_applyDecoratedDescriptor(n.prototype,"getCapabilities",[d.command],(0,a.default)(n.prototype,"getCapabilities"),n.prototype),_applyDecoratedDescriptor(n.prototype,"queryLinkPreview",[d.command],(0,a.default)(n.prototype,"queryLinkPreview"),n.prototype),_applyDecoratedDescriptor(n.prototype,"subscribePresence",[d.command],(0,a.default)(n.prototype,"subscribePresence"),n.prototype),n)}]);